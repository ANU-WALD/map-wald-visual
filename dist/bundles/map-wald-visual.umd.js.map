{"version":3,"file":"map-wald-visual.umd.js","sources":["ng://map-wald-visual/wms-layer/wms-layer.component.ts","ng://map-wald-visual/map-legend/map-legend.component.ts","ng://map-wald-visual/map-control/map-control.component.ts","ng://map-wald-visual/date-shifter/date-shifter.component.ts","ng://map-wald-visual/one-time-splash/one-time-splash.component.ts","ng://map-wald-visual/date-element/date-element.component.ts","ng://map-wald-visual/share-view/share-view.component.ts","ng://map-wald-visual/location-search/location-search.component.ts","ng://map-wald-visual/layered-map/layered-map.component.ts","ng://map-wald-visual/action-buttons/zoom-layer/zoom-layer.component.ts","ng://map-wald-visual/action-buttons/zoom-full/zoom-full.component.ts","ng://map-wald-visual/action-buttons/zoom-out/zoom-out.component.ts","ng://map-wald-visual/action-buttons/zoom-in/zoom-in.component.ts","ng://map-wald-visual/action-buttons/cycle-base-map/cycle-base-map.component.ts","ng://map-wald-visual/action-buttons/cycle-opacity/cycle-opacity.component.ts","ng://map-wald-visual/button-bar/button-bar.component.ts","ng://map-wald-visual/timeseries-chart/timeseries-chart.component.ts","ng://map-wald-visual/feature-table/feature-table.component.ts","ng://map-wald-visual/collapsible-map-control/collapsible-map-control.component.ts","ng://map-wald-visual/base-map-selection/base-map-selection.component.ts","ng://map-wald-visual/simple-tree-node/simple-tree-node.component.ts","ng://map-wald-visual/simple-tree/simple-tree.component.ts","ng://map-wald-visual/catalog/catalog.component.ts","ng://map-wald-visual/date-selection/date-selection.component.ts","ng://map-wald-visual/layer-properties/layer-properties.component.ts","ng://map-wald-visual/layer-control/layer-control.component.ts","ng://map-wald-visual/theme-navbar/theme-navbar.component.ts","ng://map-wald-visual/geocoding.service.ts","ng://map-wald-visual/index.ts","ng://map-wald-visual/map-wald-visual.ts"],"sourcesContent":["import { Component, OnInit, AfterViewInit, Input,\n         OnChanges, SimpleChanges, OnDestroy } from '@angular/core';\nimport {GoogleMapsAPIWrapper} from '@agm/core';\nimport {WMSService} from 'map-wald';\n\n@Component({\n  selector: 'wms-layer',\n  template:'',\n})\nexport class WMSLayerComponent implements OnInit, OnDestroy{\n  @Input() url: string;\n  @Input() params:any;\n  @Input() opacity:number=1.0;\n  @Input() position:number=0;\n\n  constructor(private _wmsService:WMSService,\n              public _wrapper:GoogleMapsAPIWrapper) {}\n  map: any;\n  overlay:any;\n  zoom: number = 4;\n\n  private building:boolean=false;\n  buildMap(){\n    if(this.building)\n      return;\n    this.building=true;\n\n    this._wrapper.getNativeMap().then((theMap)=>{\n      this.building=false;\n      this.map = theMap;\n      this.overlay = this._wmsService.buildImageMap(\n          ()=>this.map,\n          (z)=>this.url+'?',\n          (z)=>this.params,\n          ()=>this.opacity\n        );\n\n      if(this.map.overlayMapTypes.length>this.position){\n        this.map.overlayMapTypes.removeAt(this.position);\n        this.map.overlayMapTypes.insertAt(this.position,this.overlay);\n      } else {\n        while(this.map.overlayMapTypes.length<=this.position){\n          // Temporarily add replicate layers.\n          // TheseÂ should be replaced by other wms-layer components\n          this.map.overlayMapTypes.push(this.overlay);\n        }\n      }\n    }).catch((e)=>console.log(e));\n  }\n\n  ngOnInit() {\n    if(this.url){\n      this.buildMap();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if(this.url){\n      this.buildMap();\n    }\n    // let currentOpacity: number = changes.opacity.currentValue;\n    // let previousOpacity: number = changes.opacity.previousValue;\n\n    // if (currentOpacity !== previousOpacity) {\n    //   console.log('building a map off my own bat');\n    //   this.buildMap();\n    // }\n  }\n\n  ngOnDestroy(): void {\n    this._wrapper.getNativeMap().then((theMap)=>{\n      if(this.map.overlayMapTypes.length>this.position){\n        this.map.overlayMapTypes.removeAt(this.position);\n      }\n    });\n  }\n}\n","import { Component, OnInit, AfterViewInit, Input } from '@angular/core';\nimport { PaletteService } from 'map-wald';\n\n@Component({\n  selector: 'map-legend',\n  template: `<div class=\"map-legend panel panel-group\">\n<ng-template #tooltipContent>\n  <span [innerHtml]=helpText></span>\n</ng-template>\n<strong>{{title}} <span *ngIf=\"mapUnits\" [innerHTML]=\"'('+mapUnits+')'\"></span>\n        <span *ngIf=\"helpText\"\n              [ngbTooltip]=\"tooltipContent\"\n              [placement]=\"tooltipPlacement\"\n              container=\"body\">\n          <i class=\"fa fa-info-circle\"></i>\n        </span>\n</strong>\n\n  <div *ngIf=\"!imageURL\">\n    <div style=\"display:table;line-height:15px\">\n      <div style=\"display:table-row;padding:0;\"\n          *ngFor=\"let colour of colours; let i=index\">\n        <div class=\"legend-colour\">\n          <i class=\"legend-entry\" [ngStyle]=\"{background:colour}\"></i>\n        </div>\n        <div class=\"legend-label\">\n          <span [innerHTML]=\"generatedLabels[i]\"></span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"imageURL\">\n    <img [src]=\"imageURL\">\n  </div>\n  <p *ngIf=\"attributionLink\">Source: <a [href]=\"attributionLink\">{{attribution || 'details'}}</a></p>\n  <p *ngIf=\"attribution&&!attributionLink\">Source: {{attribution}}</p>\n</div>\n`,styles: [`\n.map-legend{\n  display:block;\n  background: white;\n}\n\n.legend-colour{\n  display:table-cell;\n  padding:0px;\n}\n\n.legend-label{\n  display:table-cell;\n  padding:0px 4px 2px 2px;\n  font-size:10px;\n  vertical-align:middle;\n}\n\n.legend-entry {\n  float: left;\n  width: 15px !important;\n  height: 15px !important;\n}\n`]})\nexport class MapLegendComponent implements OnInit {\n  @Input() imageURL: string\n  @Input() colours: Array<string> = ['red', 'white', 'blue'];\n  @Input() labels: Array<string> = [];//['-','-','-'];\n  @Input() title: string = 'the title';\n  @Input() mapUnits :string = '';\n  @Input() helpText:string='No comment';\n  @Input() tooltipPlacement:string='right';\n  @Input() attribution: string;\n  @Input() attributionLink: string;\n\n  generatedLabels: string[] = [];\n  _cbPalette:string\n  _cbCount:number;\n  _cbReverse:boolean;\n  _cbRange:Array<number>;\n\n  @Input() set cbPalette(cbp:string){\n    this._cbPalette = cbp;\n    this.generatePalette();\n  }\n\n  get cbPalette():string{return this._cbPalette;}\n\n  @Input() set cbCount(cbc:number){\n    this._cbCount=cbc;\n    this.generatePalette();\n  }\n\n  get cbCount():number{return this._cbCount;}\n\n  @Input() set cbReverse(cbr:boolean){\n    this._cbReverse=cbr;\n    this.generatePalette();\n  }\n\n  get cbReverse():boolean{return this._cbReverse;}\n\n  @Input() set cbRange(cbr:Array<number>){\n    this._cbRange = cbr;\n    this.generatePalette();\n  }\n\n  get cbRange():Array<number>{return this._cbRange;}\n\n  generateLabels(count:number):Array<string>|null{\n    if(!this._cbRange||!count){\n      return null;\n    }\n\n    var delta = (this._cbRange[1]-this._cbRange[0])/(count);\n    var result = [];\n    var lower=this._cbRange[0];\n    let  decimalPlaces = Math.max(0,2-(+Math.log10(this._cbRange[1]-this._cbRange[0]).toFixed()));\n    decimalPlaces = Math.min(decimalPlaces,10);\n    var upper;\n    for(let i=1;i<(count);i++){\n      upper = this._cbRange[0]+i*delta;\n      result.push(`${this.formatValue(lower,decimalPlaces)}-${this.formatValue(upper,decimalPlaces)}`);\n      lower = upper;\n    }\n    result.push('&ge;'+this.formatValue(upper,decimalPlaces));\n    result.reverse();\n    return result;\n  }\n\n  generatePalette(){\n    if(!this._cbPalette||!this._cbCount){\n      return;\n    }\n\n    this._palettes.getPalette(this._cbPalette,this._cbReverse,this._cbCount)\n      .subscribe(palette=>{\n        this.colours = palette.slice().reverse();\n        this.generatedLabels = this.labels || this.generateLabels(this.colours.length) || palette;\n    });\n  }\n\n  formatValue = function(val:number,decimalPlaces:number):string{\n    if(!val){\n      if(val===0){\n        return '0';\n      }\n      return '-';\n    }\n    // Add thousand's separator. Source: http://stackoverflow.com/a/2901298\n    var parts = val.toString().split(\".\");\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n\n    if(decimalPlaces===0){\n      return parts[0];\n    }\n\n    if((decimalPlaces!==null) &&(decimalPlaces!==undefined) && (parts.length===2)){\n      parts[1] = parts[1].substr(0,decimalPlaces);\n      parts[1] = parts[1].replace(/0+$/, '');\n    }\n    return parts.join('.');\n  };\n\n  constructor(private _palettes:PaletteService) { }\n\n  ngOnInit() { }\n\n}\n","import { Component, ElementRef, OnInit, ViewChild, AfterViewInit, Input } from '@angular/core';\nimport {GoogleMapsAPIWrapper} from '@agm/core';\n\n@Component({\n  selector: 'map-control',\n  template: `<div #mapControl class=\"map-control-content\">\n  <ng-content></ng-content>\n</div>\n`,styles: [`.map-control-content{\n  background: transparent;\n}\n`],\n})\nexport class MapControlComponent implements OnInit,AfterViewInit {\n  @ViewChild('mapControl',{static:false}) mapControl: Component;\n  @Input() position:string = 'TOP_RIGHT';\n\n  constructor(private _el:ElementRef, public _wrapper:GoogleMapsAPIWrapper) { }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit(){\n    this._wrapper.getNativeMap().then((m)=>{\n      let content: HTMLElement = this._el.nativeElement.querySelector('.map-control-content');\n\n      // If content of the map control is not already wrapped in a div, do it\n      // now.\n      if (content.nodeName !== \"DIV\") {\n        let controlDiv: HTMLElement = document.createElement('div');\n        controlDiv.appendChild(content);\n        content = controlDiv;\n      }\n\n      (<any>m).controls[(<any>window).google.maps.ControlPosition[this.position]].push(content);\n    });\n  }\n\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, OnChanges, SimpleChanges, EventEmitter } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'date-shifter',\n  template: `<div>\n  <h3>{{dateText}}</h3>\n  <input type=\"range\"\n         class=\"form-control\"\n         min=\"-4\"\n         [max]=\"4\"\n         step=\"1\"\n         [(ngModel)]=\"value\"\n         (ngModelChange)=\"sliderMoved()\"\n         (mouseup)=\"reset()\">\n  <h4>{{label}}</h4>\n</div>\n\n  `,\n  styles: [``]\n})\nexport class DateShifterComponent implements AfterViewInit,OnChanges  {\n  @Input() interval = 2000;\n  @Input() limits:Date[] = null;\n  @Input() date = new Date();\n  @Output() dateChange = new EventEmitter<Date>();\n\n  value = 0;\n  label = '-';\n  timer:number = 0;\n  dateText = '-';\n\n  constructor(){\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(changes.interval){\n      this.startTimer();\n    }\n  }\n\n  startTimer(): any {\n    if(this.timer){\n      clearInterval(this.timer);\n    }\n    this.timer = window.setInterval(()=>this.tick(),this.interval);\n  }\n\n  ngAfterViewInit(){\n    this.startTimer();\n  }\n\n  reset(){\n    this.value = 0;\n    this.sliderMoved();\n  }\n\n  tick(): any {\n    if(!this.value){\n      return;\n    }\n\n    let sign = this.value < 0 ? -1 : 1;\n    this.date = new Date(this.date.getTime());\n    switch(Math.abs(this.value)){\n      case 1:\n        this.date.setDate(this.date.getDate()+sign);\n        break;\n      case 2:\n        this.date.setDate(this.date.getDate()+7*sign);\n        break;\n      case 3:\n        this.date.setMonth(this.date.getMonth()+sign);\n        break;\n      case 4:\n        this.date.setFullYear(this.date.getFullYear()+sign);\n        break;\n    }\n\n    if(this.limits&&this.limits.length){\n      if(this.date.getTime()<this.limits[0].getTime()){\n        this.date = this.limits[0];\n      }\n      if(this.date.getTime()>this.limits[1].getTime()){\n        this.date = this.limits[1];\n      }\n    }\n    this.setDateText();\n    this.dateChange.emit(this.date);\n  }\n  setDateText(): any {\n    this.dateText = this.date.toLocaleDateString();\n  }\n\n  sliderMoved(){\n    this.setLabel();\n  }\n\n  setLabel() {\n    if(this.value<0){\n      this.label = 'back 1';\n    } else if(this.value>0){\n      this.label = 'advance 1';\n    } else {\n      this.label = '-';\n    }\n\n    switch(Math.abs(this.value)){\n      case 1:\n        this.label += 'day';\n        break;\n      case 2:\n        this.label += 'week';\n        break;\n      case 3:\n        this.label += 'month';\n        break;\n      case 4:\n        this.label += 'year';\n        break;\n    }\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\nimport { NgbModal, NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport * as store from 'store';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'one-time-splash',\n  template: `<ng-template #splashTemplate let-c=\"close\" let-d=\"dismiss\">\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title\">\n      {{label}}</h4>\n    <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"d('Cross click')\">\n      <span aria-hidden=\"true\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <ng-content></ng-content>\n  </div>\n  <div class=\"modal-footer\">\n    <label *ngIf=\"application\">\n      <input type=\"checkbox\" [(ngModel)]=\"doNotShow\" (ngModelChange)=\"doNotShowClicked()\">\n      &nbsp; {{hideMessage}}\n    </label>\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"c('Close click')\">Close</button>\n  </div>\n  </ng-template>\n`,\n  styles: [``]\n})\nexport class OneTimeSplashComponent implements AfterViewInit  {\n  @ViewChild('splashTemplate',{static:false}) splashTemplate:any;\n  @Input() application:string;\n  @Input() label = 'About';\n  @Input() hideMessage = 'Understood, I donât need to see this again';\n  @Input() klass: string;\n  doNotShow: boolean;\n  current:NgbModalRef;\n\n  constructor(private modalService: NgbModal){\n\n  }\n\n  storageKey(){\n    if(!this.application){\n      return null;\n    }\n\n    return this.application  + '-splash-skip';\n  }\n\n  ngAfterViewInit(){\n    setTimeout(()=>{\n      const key = this.storageKey();\n      if(key){\n        this.doNotShow = store.get(key,false);\n      }\n\n      if(!this.doNotShow){\n        this.show();\n      }\n    });\n  }\n\n  show(){\n    this.current = this.modalService.open(this.splashTemplate,{\n      size:'lg',\n      windowClass:this.klass\n    });\n  }\n\n  close(){\n    if(!this.current){\n      return;\n    }\n\n    this.current.close();\n    this.current=null;\n  }\n\n  doNotShowClicked(){\n    const key = this.storageKey();\n    if(!key){\n      return;\n    }\n\n    store.set(key,this.doNotShow);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'date-element',\n  template: `<div class=\"row no-gutters\">\n  <div class=\"col-4\">{{label}}</div>\n  <div class=\"col-2\">\n    <button class=\"btn btn-secondary btn-sm\" (click)=\"move(-step)\">\n      <i class=\"fa fa-angle-left\"></i>\n    </button>\n  </div>\n  <div class=\"col-4\"><button class=\"btn btn-link btn-sm\">{{src[property]}}</button></div>\n  <div class=\"col-2\">\n    <button class=\"btn btn-secondary btn-sm\" (click)=\"move(step)\">\n      <i class=\"fa fa-angle-right\"></i>\n    </button>\n  </div>\n</div>\n`,styles: []})\nexport class DateElementComponent implements AfterViewInit  {\n  @Input() label:string;\n  @Input() property:string;\n  @Input() src:any;\n  @Input() step = 1;\n  @Output() changed = new EventEmitter<any>();\n  \n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  move(n:number){\n    this.src[this.property] += n;\n    this.changed.emit(this.src);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'share-view',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Share current view\"\n        placement=\"right\"\n        [disabled]=\"true\"\n><i class=\"fa fa-share-alt\"></i></button>\n`,styles: []})\nexport class ShareViewComponent implements AfterViewInit  {\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n}","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'location-search',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Location search\"\n        placement=\"right\"\n        [disabled]=\"true\"\n\n><i class=\"fa fa-search\"></i></button>\n`,styles: []})\nexport class LocationSearchComponent implements AfterViewInit  {\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n}","import { Component, Input, ViewChild, AfterViewInit, OnChanges, SimpleChanges,\n         Output, EventEmitter, ViewChildren, QueryList, NgZone } from '@angular/core';\nimport { MappedLayer, Bounds, LayerSelection, StaticDataService, MetadataService  } from 'map-wald';\nimport { DataMouseEvent, LatLng, AgmMap, AgmInfoWindow} from '@agm/core';\nimport { Feature, Point, GeometryObject } from 'geojson';\nimport { MapTypeControlOptions, ControlPosition } from '@agm/core/services/google-maps-types';\n\nexport interface SimpleMarker {\n  loc:LatLng;\n  value:string;\n  open:boolean;\n  iconUrl:string;\n  html?:string;\n}\n\n@Component({\n  selector: 'layered-map',\n  template: `<agm-map #theMap\n[(latitude)]=\"lat\"\n[(longitude)]=\"lng\"\n[(zoom)]=\"zoom\"\n(zoomChange)=\"zoomChanged()\"\n[disableDefaultUI]=\"false\"\n[zoomControl]=\"false\"\n[mapTypeId]=\"mapTypeId\"\n[mapTypeControl]=\"showMapType\"\n[mapTypeControlOptions]=\"mapTypeOptions\"\n[streetViewControl]=\"streetViewControl\"\nscaleControl=\"true\"\n[fitBounds]=\"_bounds\"\n(mapClick)=\"mapClick($event)\">\n\n<agm-marker *ngFor=\"let marker of markers\"\n            [longitude]=\"marker.loc.lng\"\n            [latitude]=\"marker.loc.lat\"\n            [iconUrl]=\"marker.iconUrl\">\n  <agm-info-window #infoWindows [disableAutoPan]=\"true\">\n    <strong>{{marker.value}}</strong>\n    <span *ngIf=\"marker.html\" [innerHTML]=\"marker.html\"></span>\n  </agm-info-window>\n</agm-marker>\n\n<ng-container *ngFor=\"let mp of layers.slice()|reverse; let i = index\" [ngSwitch]=\"mp.layerType\">\n  <wms-layer *ngSwitchCase=\"'wms'\"\n    [url]=\"mp.url\"\n    [params]=\"mp.wmsParameters\"\n    [opacity]=\"mp.opacity\"\n    [position]=\"mp.options.position\">\n  </wms-layer>\n  <agm-data-layer *ngSwitchCase=\"'vector'\"\n                [geoJson]=\"mp.staticData\"\n                [style]=\"mp._styleFunc\"\n                (layerClick)=\"clicked($event)\"\n                >\n  </agm-data-layer>\n\n  <ng-container *ngSwitchCase=\"'circle'\">\n    <agm-circle *ngFor=\"let f of mp.staticData.features; let j=index\"\n                [latitude]=\"f.geometry.coordinates[1]\"\n                [longitude]=\"f.geometry.coordinates[0]\"\n                [radius]=\"10000000/(zoom*zoom*zoom*zoom)\"\n                [fillColor]=\"mp.flattenedSettings?.styles?.fillColor||'black'\"\n                [fillOpacity]=\"mp.flattenedSettings?.styles?.fillOpacity||1\"\n                [strokeColor]=\"mp.flattenedSettings?.styles?.strokeColor||'black'\"\n                [strokeOpacity]=\"mp.flattenedSettings?.styles?.strokeOpacity||1\"\n                [strokePosition]=\"0\"\n                [strokeWeight]=\"(f===selectedFeature)?3:(mp.flattenedSettings?.styles?.strokeWeight||0.5)\"\n                (circleClick)=\"circleClicked(mp,f)\"\n                >\n    </agm-circle>\n  </ng-container>\n\n  <!--\n  -->\n</ng-container>\n\n<!-- for map controls -->\n<map-control position=\"TOP_CENTER\">\n    <ng-content select=\".map-control.top-center\"></ng-content>\n</map-control>\n\n<map-control position=\"TOP_LEFT\">\n    <ng-content select=\".map-control.top-left\"></ng-content>\n</map-control>\n\n<map-control position=\"TOP_RIGHT\">\n    <ng-content select=\".map-control.top-right\"></ng-content>\n</map-control>\n\n<map-control position=\"LEFT_TOP\">\n    <ng-content select=\".map-control.left-top\"></ng-content>\n</map-control>\n\n<map-control position=\"RIGHT_TOP\">\n    <ng-content select=\".map-control.right-top\"></ng-content>\n</map-control>\n\n<map-control position=\"LEFT_CENTER\">\n    <ng-content select=\".map-control.left-center\"></ng-content>\n</map-control>\n\n<map-control position=\"RIGHT_CENTER\">\n    <ng-content select=\".map-control.right-center\"></ng-content>\n</map-control>\n\n<map-control position=\"LEFT_BOTTOM\">\n    <ng-content select=\".map-control.left-bottom\"></ng-content>\n</map-control>\n\n<map-control position=\"RIGHT_BOTTOM\">\n    <ng-content select=\".map-control.right-bottom\"></ng-content>\n</map-control>\n\n<map-control position=\"BOTTOM_CENTER\">\n    <ng-content select=\".map-control.bottom-center\"></ng-content>\n</map-control>\n\n<map-control position=\"BOTTOM_LEFT\">\n    <ng-content select=\".map-control.bottom-left\"></ng-content>\n</map-control>\n\n<map-control position=\"BOTTOM_RIGHT\">\n    <ng-content select=\".map-control.bottom-right\"></ng-content>\n</map-control>\n\n</agm-map>\n\n`,styles: []})\nexport class LayeredMapComponent implements AfterViewInit, OnChanges {\n  @Input() layers: Array<MappedLayer> = [];\n  @Input() markers:Array<SimpleMarker> = [];\n  @Input() mapTypeId:string='roadmap';\n\n  @Output() layersChange = new EventEmitter<Array<MappedLayer>>();\n  @Output() featureSelected = new EventEmitter<{feature:Feature<GeometryObject>,layer?:MappedLayer}>();\n  @Output() pointSelected = new EventEmitter<LatLng>();\n  @Input() mapTypePosition:number = ControlPosition.BOTTOM_LEFT\n  @Input() streetViewControl = true;\n\n  @ViewChild(AgmMap,{static:false}) theMap:AgmMap;\n  @ViewChildren('infoWindows') infoWindows:QueryList<AgmInfoWindow>;\n\n  selectedFeature:any = null;\n  // google maps zoom level\n  @Input() zoom: number = 4;\n  @Input() showMapType = true;\n  mapTypeOptions: MapTypeControlOptions={\n    position:ControlPosition.BOTTOM_LEFT\n  };\n\n  // initial center position for the map\n  @Input() lat: number = -22.673858;\n  @Input() lng: number = 129.815982;\n  @Input() bounds:Bounds;\n  _bounds:Bounds;\n\n  constructor(private _zone:NgZone,\n              private staticData:StaticDataService,\n              private metadata:MetadataService) {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    // if zoom in changes...\n    if(changes.mapTypePosition){\n      if(this.mapTypePosition===null){\n        this.showMapType = false;\n      }\n      this.mapTypeOptions = {\n        position:this.mapTypePosition\n      };\n    }\n\n    if(changes.layers){\n      this.setLayerPositions();\n    }\n\n    if(changes.markers&&this.markers){\n      // deal with existing info windows?\n      if(this.infoWindows){\n          this.infoWindows.forEach((w,i)=>{\n          this._zone.runOutsideAngular(()=>w.close());\n        });\n      }\n\n      setTimeout(()=>{\n        // Check and open relevant info windows...\n        this.infoWindows.forEach((w,i)=>{\n          let m = this.markers[i];\n          if(m.open){\n            this._zone.runOutsideAngular(()=>w.open());\n          } else {\n            this._zone.runOutsideAngular(()=>w.close());\n          }\n        });\n      });\n    }\n\n    if(changes.bounds){\n      setTimeout(()=>this._bounds=this.bounds);\n    }\n  }\n\n  ngAfterViewInit() {\n  }\n\n  layersChanged(changes: Array<MappedLayer>) {\n  }\n\n  layerAdded(selection: LayerSelection) {\n    var ex = this.layers.find(l => l.layer === selection.layer);\n    if (ex) {\n      return;\n    }\n\n    var mapped = new MappedLayer();\n    mapped.layer = selection.layer;\n\n    mapped.layerType = 'wms';\n    mapped.options.legend = true;\n\n    if(selection.layer.options.vectors){\n      this.staticData.get(selection.layer.options.host,selection.layer.options.filepath).subscribe(\n        (data:any)=>{\n          mapped.staticData=data;\n          this.activateLayer(mapped,selection);\n        });\n    } else {\n      this.activateLayer(mapped, selection);\n    }\n  }\n\n  private activateLayer(mapped: MappedLayer, selection: LayerSelection) {\n    mapped.update();\n    if (selection.action === 'replace') {\n      if(selection.filter){\n        this.layers = this.layers.filter(ml=>!selection.filter(ml));\n      } else {\n        this.layers = [];\n      }\n    }\n    this.layers = [mapped].concat(this.layers);\n    this.setLayerPositions();\n    this.layersChange.emit(this.layers);\n  }\n\n  setLayerPositions(){\n    let ix=0;\n    for(var i=this.layers.length-1;i>=0;i--){\n      if(this.layers[i].layerType==='wms'){\n        this.layers[i].options.position=ix;\n        ix++;\n      }\n    }\n  }\n  extractFeature(f:any) : Feature<Point>{\n    var geo = f.getGeometry();\n    geo = {\n      type:'Point',\n      coordinates:geo.get(0)\n    }\n\n    var props:{[key:string]:any} = {};\n    f.forEachProperty((val:any,prop:string)=>props[prop]=val);\n\n    return {\n      type:'Feature',\n      geometry:geo,\n      properties:props\n    };\n  }\n\n  clicked(event:DataMouseEvent){\n    var feature = this.extractFeature(event.feature);\n    this.selectedFeature = feature;\n    this.featureSelected.emit({feature:feature});\n  }\n\n  circleClicked(ml:MappedLayer,feature:any){\n    this.selectedFeature = feature;\n    this.featureSelected.emit({feature:feature,layer:ml});\n  }\n\n  mapClick(event:any){\n    var coords:LatLng = event.coords;\n    this.pointSelected.emit(coords);\n  }\n\n  zoomToBounds(bounds:Bounds){\n    this._bounds = bounds;\n  }\n\n  zoomChanged(){\n    this.layers = this.layers.slice();\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\nimport { MappedLayer, Bounds } from 'map-wald';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'zoom-layer',\n  template: `<button type=\"button\" [disabled]=\"!layer\" class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Zoom to selected layer\"\n        placement=\"right\"\n        (click)=\"zoomToLayer()\"\n><i class=\"fa fa-compress\"></i>\n</button>\n`,styles: []})\nexport class ZoomLayerComponent implements AfterViewInit {\n  @Input() map: LayeredMapComponent;\n  @Input() layer: MappedLayer;\n  @Input() fullBounds: Bounds;\n\n  constructor() {\n\n  }\n\n  ngAfterViewInit() {\n\n  }\n\n  zoomToLayer() {\n    if(this.layer.layer.spatialExtent){\n      console.log('Zoom to layer');\n      this.layer.layer.spatialExtent.subscribe(b=>{\n        this.map.zoomToBounds(Object.assign({},b));\n      });\n    } else {\n      console.log('Zoom full');\n      this.map.zoomToBounds(Object.assign({}, this.fullBounds));\n    }\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\nimport { Bounds } from 'map-wald';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'zoom-full',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Zoom to full extent\"\n        placement=\"right\"\n        (click)=\"zoomToBounds()\"\n><i class=\"fa fa-arrows-alt\"></i></button>\n`,styles: []})\nexport class ZoomFullComponent implements AfterViewInit  {\n  @Input() map:LayeredMapComponent;\n  @Input() bounds:Bounds;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  zoomToBounds(){\n    this.map.zoomToBounds(Object.assign({},this.bounds));\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'zoom-out',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Zoom out\"\n        placement=\"right\"\n        (click)=\"zoomOut()\"\n><i class=\"fa fa-minus\"></i></button>`,styles: []})\nexport class ZoomOutComponent implements AfterViewInit  {\n  @Input() map:LayeredMapComponent;\n  @Input() minZoom:number = 1;\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  zoomOut(){\n    if(!this.map){\n      return;\n    }\n    this.map.zoom = Math.max(this.minZoom, this.map.zoom - 1);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'zoom-in',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n        ngbTooltip=\"Zoom in\"\n        placement=\"right\"\n        (click)=\"zoomIn()\"\n><i class=\"fa fa-plus\"></i></button>`,styles: []})\nexport class ZoomInComponent implements AfterViewInit  {\n  @Input() map:LayeredMapComponent;\n  @Input() maxZoom:number = 32;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  zoomIn(){\n    if(!this.map){\n      return;\n    }\n    this.map.zoom = Math.min(this.maxZoom,this.map.zoom+1);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, OnChanges, SimpleChanges } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\n\nexport interface BaseLayer {\n  map_type_id: string;\n  label: string;\n  icon?: string;\n}\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'cycle-base-map',\n  template: `<button class=\"btn btn-secondary btn-sm\" (click)=\"toggleBaseLayer()\" [ngbTooltip]=\"tooltip\"\n                     placement=\"right\">\n  <i class=\"fa\" [ngClass]=\"baseLayer?.label==='Road Map'?'fa-road':'fa-globe'\"></i>\n</button>`,styles: []})\nexport class CycleBaseMapComponent implements AfterViewInit, OnChanges  {\n  @Input() map:LayeredMapComponent;\n  @Input() maxZoom:number = 32;\n  @Input() baseLayers:BaseLayer[] = [\n    {\n      map_type_id : 'roadmap',\n      label : 'Road Map'\n    },\n    {\n      map_type_id : 'satellite',\n      label : 'Satellite'\n    }\n  ]\n  @Input() baseLayer:BaseLayer;\n  @Input() tooltip = 'Toggle base layer';\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(this.baseLayers && !this.baseLayer){\n      this.baseLayer = this.baseLayers[0];\n    }\n  }\n\n  toggleBaseLayer(){\n    if(!this.map){\n      return;\n    }\n\n    let current = this.baseLayers.findIndex(l=>l.map_type_id===this.baseLayer.map_type_id);\n    let next = (current+1)%this.baseLayers.length;\n    this.baseLayer = this.baseLayers[next];\n\n    this.map.mapTypeId = this.baseLayer ?\n                                this.baseLayer.map_type_id:\n                                null;\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, OnChanges, SimpleChanges } from '@angular/core';\nimport { LayeredMapComponent } from '../../layered-map/layered-map.component';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'cycle-opacity',\n  template: `<button class=\"btn btn-secondary btn-sm\"\n                     (click)=\"cycleTransparency()\"\n                     [ngbTooltip]=\"tooltip\"\n                     placement=\"right\">\n<i class=\"fa\" [ngClass]=\"(layerOpacity<0.5)?'fa-circle-o':((layerOpacity<0.9)?'fa-adjust':'fa-circle')\"></i>\n</button>`,styles: []})\nexport class CycleOpacityComponent implements AfterViewInit, OnChanges  {\n  @Input() map:LayeredMapComponent;\n  @Input() maxZoom = 32;\n  @Input() tooltip = 'Adjust transparency of grid layer';\n  @Input() layerOpacity = 1.0;\n  @Input() step = 0.4;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(this.map){\n      this.map.layersChange.subscribe(()=>this.updateLayers());\n    }\n  }\n\n  cycleTransparency(){\n    this.layerOpacity -= this.step;\n    if(this.layerOpacity<0){\n      this.layerOpacity = 1.0;\n    }\n    this.updateLayers();\n  }\n\n  private updateLayers() {\n    this.map.layers.forEach(l => l.opacity = this.layerOpacity);\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'button-bar',\n  template: `<div class=\"button-bar bb-vertical\">\n  <ng-content></ng-content>\n</div>\n\n`,styles: [`\n`]})\nexport class ButtonBarComponent implements AfterViewInit  {\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n}","/// <reference path=\"../decs.d.ts\" />\n\nimport { Component, Input, ViewChild, AfterViewInit, ElementRef, OnChanges, SimpleChanges } from '@angular/core';\nimport { TimeSeries } from 'map-wald';\n//import * as Plotly from 'plotly.js/dist/plotly-basic';\n\n//declare var Plotly: any;\n//const Plotly = require('plotly.js/dist/plotly-basic');\n\nimport * as Plotly from 'plotly.js/dist/plotly-basic';\n// import * as Plotly from 'plotly.js';\n\n@Component({\n  selector: 'timeseries-chart',\n  template: `<div class=\"our-chart\">\n</div>\n`,styles: []})\nexport class TimeseriesChartComponent implements AfterViewInit, OnChanges  {\n  @Input() title:string;\n  @Input() timeSeries: Array<TimeSeries> = [];\n  @Input() marginLeft:number = 40;\n  @Input() marginRight:number = 10;\n  @Input() marginTop:number = 0;\n  @Input() marginBottom:number = 20;\n  @Input() titlefont:any = undefined;\n\n  constructor(private _element:ElementRef){\n\n  }\n\n  ngAfterViewInit(){\n    this.draw();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.draw();\n  }\n\n  draw(){\n    var node = this._element.nativeElement.querySelector('.our-chart');\n\n    Plotly.purge(node);\n\n        if(!this.timeSeries || !this.timeSeries.length){\n      return;\n    }\n\n    const seriesUnits = this.timeSeries.map(ts=>ts.units);\n    let commonUnits:string;\n    if(seriesUnits.every(u=>u===seriesUnits[0])){\n      commonUnits = seriesUnits[0];\n    }\n\n    var layout:any = {\n      margin: {\n        t: this.marginTop + (this.title?30:0),\n        l:this.marginLeft,\n        r:this.marginRight,\n        b:this.marginBottom\n      },\n      yaxis:{\n        fixedrange: true,\n        title:commonUnits\n      },\n      width:320,\n      height:200,\n      title:this.title || undefined,\n      titlefont:this.titlefont\n    };\n\n    Plotly.plot( node, this.timeSeries.map(ts=>{\n      const nonNullCount = ts.values.filter(v=>!isNaN(v)).length;\n      const mode = ((ts.style!=='bar')&&(nonNullCount<365)) ?\n                   'lines+markers' :\n                   undefined;\n      const suffix = commonUnits?'':` (${ts.units})`;\n      return {\n        type:(ts.style==='bar')?'bar':undefined,\n        mode:mode,\n        x:ts.dates,\n        y:ts.values,\n        name:ts.label+suffix\n      };\n    }), layout );\n  }\n}\n","import { Component, Input, AfterViewInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { LayerPropertyStyle } from 'map-wald';\n\n@Component({\n  selector: 'feature-table',\n  template: `<table *ngIf=\"feature\" class=\"table table-striped table-sm feature-table\">\n  <thead>\n    <tr>\n      <td><strong>Property</strong></td>\n      <td><strong>Value</strong></td>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><strong>Geometry</strong></td>\n      <td>{{feature.geometry.type}}</td>\n    </tr>\n    <tr *ngFor=\"let prop of _keys(feature.properties)\">\n      <td><strong>{{prop}}</strong></td>\n      <td *ngIf=\"!styles||!styles[prop]\">{{feature.properties[prop]}}</td>\n      <td *ngIf=\"styles&&styles[prop]\">\n        <a *ngIf=\"styles[prop].hyperlink\" target=\"_blank\" [href]=\"feature.properties[prop]\">\n          {{feature.properties[prop]}}\n        </a>\n      </td>\n    </tr>\n  </tbody>\n</table>`,styles: [`.feature-table{\n  max-width:300px;\n}`]})\nexport class FeatureTableComponent implements AfterViewInit, OnChanges {\n  @Input() feature: any;\n  @Input() styles: {[key:string]:LayerPropertyStyle} = {}\n  _keys = Object.keys;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(!this.styles){\n      this.styles = {};\n    }\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'collapsible-map-control',\n  template: `<div class=\"card map-control collapsible-control\">\n    <a (click)=\"isCollapsed = !isCollapsed\">\n      <div class=\"card-header\">\n        <h6 class=\"mb-0\">\n          {{heading}}\n          <span *ngIf=\"isCollapsed\" class=\"float-right fa fa-caret-up\n            collapse-arrow\" aria-hidden=\"true\"></span>\n          <span *ngIf=\"!isCollapsed\" class=\"float-right fa fa-caret-down\n            collapse-arrow\" aria-hidden=\"true\"></span>\n        </h6>\n      </div>\n    </a>\n\n    <div class=\"ngbCollapse\" [ngbCollapse]=\"isCollapsed\">\n      <ng-content></ng-content>\n    </div>\n  </div>\n`,styles: [`.collapsible-control{\n  margin:3px;\n}`]})\nexport class CollapsibleMapControlComponent implements AfterViewInit  {\n  @Input() isCollapsed: boolean;\n  @Input() heading: string;\n  @Input() direction: string;\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n}","import { Component, Input, ViewChild, AfterViewInit, ElementRef } from '@angular/core';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'base-map-selection',\n  template: `<p>base-map-selection Component</p>`,styles: []})\nexport class BaseMapSelectionComponent implements AfterViewInit  {\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n}","import { Component, Input, ViewChild, AfterViewInit, ElementRef,\n  EventEmitter, Output, OnChanges, SimpleChanges } from '@angular/core';\nimport { TreeModel } from 'map-wald';\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'simple-tree-node',\n  template: `<a href=\"#\"\n                (click)=\"treeClick($event)\"\n                [ngClass]=\"tree.klass\"><i [ngClass]=\"icon\"></i>\n  &nbsp;\n  <span ngbTooltip=\"{{tree.tooltip | async}}\"\n        placement=\"right\"\n        container=\"body\">{{tree.label}}</span>\n  <span *ngIf=\"tree.actions\"\n        class=\"float-right\">\n      &nbsp;\n      <i *ngFor=\"let a of tree.actions\"\n       [ngClass]=\"a.icon\"\n       ngbTooltip=\"{{a.tooltip | async}}\"\n       placement=\"right\"\n       container=\"body\"\n       (click)=\"a.action(tree)\">&nbsp;</i>\n  </span>\n</a>\n`,styles: []})\nexport class SimpleTreeNodeComponent implements AfterViewInit, OnChanges{\n  ngOnChanges(changes: SimpleChanges): void {\n    this.evalState();\n  }\n\n  ngAfterViewInit(): void {\n  }\n\n  @Input() tree: TreeModel;\n  @Input() options:any = {};\n  @Output() nodeSelected = new EventEmitter();\n\n  expanded: boolean;\n  leaf: boolean;\n  collapsed: boolean;\n  icon: string;\n\n  treeClick(event: any) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.tree) {\n      return;\n    }\n    this.tree.expanded = !this.tree.expanded;\n    this.evalState();\n\n    if(this.tree.actions&&this.tree.actions.length){\n      this.tree.actions[0].action(this.tree);\n    } else {\n      this.nodeSelected.emit(this.tree);\n    }\n  }\n\n  private evalState() {\n    this.expanded = this.tree &&\n      this.tree.expanded &&\n      this.tree.children &&\n      this.tree.children.length > 0;\n    this.leaf = this.tree && (!this.tree.children || this.tree.children.length === 0);\n    this.collapsed = this.tree &&\n      !this.tree.expanded &&\n      this.tree.children &&\n      this.tree.children.length > 0;\n    if (this.expanded) {\n      this.icon = this.options.expandedIcon;\n    }\n    else if (this.collapsed) {\n      this.icon = this.options.collapsedIcon;\n    }\n    else {\n      this.icon = this.options.leafIcon;\n    }\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, OnChanges, SimpleChanges, Output, EventEmitter } from '@angular/core';\nimport { TreeModel } from 'map-wald';\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'simple-tree',\n  template: `<div *ngIf=\"tree&&tree.visible\" class=\"simple-tree\">\n\n  <div *ngIf=\"inner\">\n    <li ><simple-tree-node [tree]=\"tree\"\n                           [options]=\"options\"\n                           (nodeSelected)=\"childSelected($event)\"></simple-tree-node>\n      <ul *ngIf=\"tree.children&&tree.expanded\" class=\"inner-list\">\n        <simple-tree *ngFor=\"let t of tree.children\" [tree]=\"t\" [inner]=\"true\"\n                    (nodeSelected)=\"childSelected($event)\"\n                    [options]=\"options\"></simple-tree>\n      </ul>\n    </li>\n  </div>\n\n  <div *ngIf=\"!inner&&showTop\">\n    <ul class=\"outer-list\">\n      <li><simple-tree-node [tree]=\"tree\" [options]=\"options\"\n        (nodeSelected)=\"childSelected($event)\"></simple-tree-node>\n        <ul *ngIf=\"tree.children&&tree.expanded\" class=\"inner-list\">\n            <simple-tree *ngFor=\"let t of tree.children\" [tree]=\"t\" [inner]=\"true\"\n            (nodeSelected)=\"childSelected($event)\"\n            [options]=\"options\"></simple-tree>\n        </ul>\n      </li>\n    </ul>\n  </div>\n\n  <div *ngIf=\"!inner&&!showTop\">\n      <ul *ngIf=\"tree.children&&tree.expanded\" class=\"outer-list\">\n          <simple-tree *ngFor=\"let t of tree.children\" [tree]=\"t\" [inner]=\"true\"\n          (nodeSelected)=\"childSelected($event)\"\n          [options]=\"options\"></simple-tree>\n      </ul>\n    </div>\n\n</div>\n`,styles: [`\n.simple-tree ul{\n  list-style-type: none\n}\n\nul.outer-list{\n  padding-left:5px;\n}\n\nul.inner-list{\n  padding-left:15px;\n}`]})\nexport class SimpleTreeComponent implements AfterViewInit, OnChanges {\n  @Input() tree: TreeModel;\n  @Input() showTop: boolean = true;\n  @Input() inner: boolean;\n\n  @Input() collapsedIcon = 'fa fa-caret-right';\n  @Input() expandedIcon = 'fa fa-caret-down';\n  @Input() leafIcon = 'fa fa-minus';\n\n  @Output() nodeSelected = new EventEmitter();\n\n  @Input() options:any = {};\n\n  constructor() {\n\n  }\n\n  ngAfterViewInit() {\n\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if(changes.options){\n      return;\n    }\n\n    this.options = {\n      collapsedIcon:this.collapsedIcon,\n      expandedIcon:this.expandedIcon,\n      leafIcon:this.leafIcon\n    };\n  }\n\n  childSelected(node:TreeModel){\n    this.nodeSelected.emit(node);\n  }\n\n}\n","import {\n  Component, Input, ViewChild, AfterViewInit, ElementRef,\n  OnChanges, Output, EventEmitter, SimpleChanges\n} from '@angular/core';\nimport { Catalog,  Layer, Theme, LayerSelection, TreeModel,\n  TreeFilterService, MetadataService, MappedLayer } from 'map-wald';\nimport { map } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\ndeclare var Plotly: any;\n\nexport interface CatalogNodeAction {\n  action:string;\n  icon:string;\n  tooltip:string;\n}\n\n@Component({\n  selector: 'catalog',\n  template: `<div class=\"input-group\">\n  <span class=\"input-group-btn\">\n            <button class=\"btn\" type=\"button\" [disabled]=\"!filterText\"\n              (click)=\"filterText = ''\">\n            <i *ngIf=\"filterText\"class=\"fa fa-times\" aria-hidden=\"true\"></i>\n            <i *ngIf=\"!filterText\"class=\"fa fa-search\" aria-hidden=\"true\"></i>\n            </button>\n  </span>\n  <input #filterInput type=\"text\" class=\"form-control\" placeholder=\"Catalog search...\"\n  [(ngModel)]=\"filterText\"/>\n</div>\n\n<simple-tree\n  [tree]=\"this.filterService.filterTree(tree, filterText)\"\n  [showTop]=\"false\"\n  [leafIcon]=\"leafIcon\"\n  [collapsedIcon]=\"collapsedIcon\"\n  [expandedIcon]=\"expandedIcon\"\n  (nodeSelected)=\"nodeSelected($event)\">\n</simple-tree>\n`,styles: [`\n.node-name{\n  font-size:1em;\n}\n`],})\nexport class CatalogComponent implements AfterViewInit, OnChanges {\n  @Input() catalog: Catalog;\n  @Input() showPlaceholders = true;\n  @Input() defaultAction = 'add';\n  @Input() layerActions: CatalogNodeAction[] = [];\n  @Output() layerSelected: EventEmitter<LayerSelection> = new EventEmitter<LayerSelection>();\n  @Input() collapsedIcon = 'fa fa-caret-right';\n  @Input() expandedIcon = 'fa fa-caret-down';\n  @Input() leafIcon = 'fa fa-minus';\n\n  layers: Array<Layer> = [];\n  tree: TreeModel = { label: 'no catalog loaded' };\n  filterText = '';\n\n  filterService: TreeFilterService;\n\n  constructor(filterService: TreeFilterService, private metadata:MetadataService) {\n    this.filterService = filterService;\n  }\n\n  ngAfterViewInit() {\n    if (this.catalog) {\n      this.buildTree();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.catalog && this.catalog) {\n      this.filterText = '';\n      this.buildTree();\n      this.highlightLayers([],this.tree);\n    }\n  }\n\n  buildTree() {\n    let self = this;\n    this.layers = [];\n    var cat = this.catalog;\n    var tree: TreeModel = {\n      label: cat.name,\n      expanded: true,\n      visible: true,\n      // settings:{\n      //   static:true,\n      //   leftMenu:false\n      // }\n    }\n\n    var deferredLayers = cat.themes.map(t => t.layers.filter(l => l.path&&!l.skip)).reduce((l, r) => l.concat(r), []);\n    var deferredThemes = cat.themes.filter(t => t.path&&!t.skip);\n\n    const treeActions = this.layerActions.map(la=>{\n      return {\n        icon:la.icon,\n        tooltip:la.tooltip,\n        action:(node: TreeModel) => this.layerClick(node.data,la.action)\n      };\n    });\n\n    const layerToTree = (l: Layer)=> {\n      let result:TreeModel = {\n        label: l.name,\n        data: l,\n        visible: true,\n        actions: treeActions\n      };\n\n      const tmp = new MappedLayer();\n      tmp.layer = l;\n      tmp.update();\n\n      if(l.description){\n        result.tooltip = of(l.description);\n      } else {\n        result.tooltip = this.metadata.getMetadata(tmp).pipe(\n          map(meta=>meta[l.descriptionField||'long_name'])\n        );\n      }\n      return result;\n    }\n\n    function themeToTree(t: Theme): TreeModel {\n      return {\n        label: t.name,\n        expanded: false,\n        visible: true,\n        children: t.layers.filter(l => !l.path&&!l.skip)\n          .filter(l=>self.showPlaceholders||!l.placeholder)\n          .map(layerToTree)\n      };\n    }\n\n    tree.children = cat.themes.filter(t => !t.path&&!t.skip).map(themeToTree);\n\n    function findParent(path: string): [TreeModel,number] {\n      var components = path.split('/');\n      var parent: TreeModel = tree;\n      var index = -1;\n\n      for (var component of components) {\n        var split = component.split('@');\n        component = split[0];\n        index = -1;\n        if(split.length>1){\n          index = +split[1];\n        }\n\n        var found = false;\n        for (var n of parent.children) {\n          if (n.label === component) {\n            parent = n;\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          var newNode: TreeModel = {\n            label: component,\n            expanded: false,\n            visible: true,\n            children: []\n          };\n          addChild(parent,newNode,index);\n          parent = newNode;\n        }\n      }\n      return [parent,index];\n    }\n\n    function addChild(parent:TreeModel,child:TreeModel,i:number){\n      if(i<0){\n        parent.children.push(child);\n      } else {\n        parent.children.splice(i,0,child);\n      }\n    }\n\n    deferredThemes.forEach(t => {\n      var [parent,index] = findParent(t.path);\n      addChild(parent,themeToTree(t),index);\n    });\n\n    deferredLayers.forEach(l => {\n      var [parent,index] = findParent(l.path);\n      addChild(parent,layerToTree(l),index);\n    });\n    this.tree = tree;\n  }\n\n  layerClick(l: Layer,action:string) {\n    var selection: LayerSelection = {\n      layer: l,\n      action: action\n    };\n    this.layerSelected.emit(selection);\n  }\n\n  nodeSelected(e: TreeModel) {\n    if (!e.data) {\n      return;\n    }\n\n    var layer = <Layer>e.data;\n    this.layerClick(layer,this.defaultAction);\n  }\n\n  activeLayers(layers:Layer[]){\n    this.highlightLayers(layers,this.tree);\n  }\n\n  highlightLayers(layers:Layer[],tree:TreeModel):boolean{\n    tree.klass = null;\n\n    if(tree.data&&(layers.indexOf(tree.data)>=0)){\n      tree.klass = 'active-layer';\n      return true;\n    }\n\n    if(tree.children){\n      let activeChild = false;\n      for(let i=0;i<tree.children.length;i++){\n        activeChild = this.highlightLayers(layers,tree.children[i]) || activeChild;\n      }\n      if(activeChild){\n        tree.klass = 'active-child';\n      }\n      tree.klass = (tree.klass||'') + ' theme';\n      return activeChild;\n    }\n\n    return false;\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter } from '@angular/core';\nimport { NgbDateStruct } from '@ng-bootstrap/ng-bootstrap';\nimport { TimeUtilsService, InterpolationService } from 'map-wald';\n\nconst MILLISECONDS_PER_DAY=24*60*60*1000;\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'date-selection',\n  template: `<div class=\"date-control container-fluid\">\n  <div *ngIf=\"style!=='arrows'\" class=\"row no-gutters\">\n    <div class=\"col-8 form-group-inline\">\n        <div class=\"input-group input-group-sm\">\n          <input class=\"form-control form-control-sm\" placeholder=\"yyyy-mm-dd\"\n                 name=\"dp\" [(ngModel)]=\"dateStruct\" (ngModelChange)=\"dateStructChanged()\"\n                 ngbDatepicker #d=\"ngbDatepicker\"\n                 [maxDate]=\"maxDateStruct\" [minDate]=\"minDateStruct\">\n          <div class=\"input-group-addon\" (click)=\"d.toggle()\" >\n            <i class=\"fa fa-calendar\"></i>\n          </div>\n        </div>\n      </div>\n\n    <!--\n      <div class=\"col-2\" >\n        <button class=\"btn btn-secondary btn-sm\" [disabled]=\"atMax\"\n                (click)=\"move(1)\"><i class=\"fa fa-chevron-right\"></i></button>\n      </div>\n    -->\n  </div>\n\n  <div *ngIf=\"style==='arrows'\">\n    <date-element *ngIf=\"need.day\"   [src]=\"dateStruct\" [property]=\"'day'\" [label]=\"'Day'\"\n                  [step]=\"stepDays\"\n                  (changed)=\"dateStructChanged()\"></date-element>\n    <date-element *ngIf=\"need.month\" [src]=\"dateStruct\" [property]=\"'month'\" [label]=\"'Month'\"\n                  (changed)=\"dateStructChanged()\"></date-element>\n    <date-element *ngIf=\"need.year\"  [src]=\"dateStruct\" [property]=\"'year'\" [label]=\"'Year'\"\n                  (changed)=\"dateStructChanged()\"></date-element>\n  </div>\n</div>\n`,styles: []})\nexport class DateSelectionComponent implements AfterViewInit  {\n  @Input() date: Date;\n  @Output() dateChange = new EventEmitter();\n  @Input() timestep: string;\n  @Input() minDate: Date|string;\n  @Input() maxDate: Date|string;\n  @Input() style: ('popup'|'arrows') = 'arrows';\n  @Input() stepDays = 1;\n  @Input() referenceDate:string = null;\n\n  need = {\n    day:true,\n    month:true,\n    year:true\n  };\n\n  minDateStruct:NgbDateStruct;\n  maxDateStruct:NgbDateStruct;\n  dateStruct:NgbDateStruct;\n\n  atMax:boolean=false;\n  atMin:boolean=false;\n\n  constructor(private timeUtils: TimeUtilsService){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  ngOnChanges(changes:any){\n    if(changes.minDate){\n      this.minDateStruct = this.timeUtils.convertDate(this.minDate);\n    }\n\n    if(changes.maxDate){\n      this.maxDateStruct = this.timeUtils.convertDate(this.maxDate);\n    }\n\n    if(changes.date){\n      this.dateStruct = this.timeUtils.convertDate(this.date);\n    }\n\n    if(changes.timestep){\n      this.assessDateComponents();\n    }\n    this.checkLimits();\n  }\n\n  dateStructChanged(){\n    this.date = new Date(Date.UTC(this.dateStruct.year,this.dateStruct.month-1,this.dateStruct.day));\n    // this.date.setUTCFullYear(this.dateStruct.year)\n    // this.date.setUTCMonth(this.dateStruct.month-1)\n    // this.date.setUTCDate(this.dateStruct.day);\n    this.checkReference();\n    this.dateChange.emit(this.date);\n  }\n\n  assessDateComponents(){\n    this.need.day = this.need.month = this.need.year = true;\n    if(this.timestep==='daily'){\n      return;\n    }\n    this.need.day = false;\n\n    if(this.timestep==='annual') {\n      this.need.month = false;\n    }\n  }\n\n  move(n:number){\n    this.date = new Date(this.date&&this.date.getTime());\n    this.date.setDate(this.date.getDate()+n);\n    this.onDateChanged();\n    this.dateChange.emit(this.date);\n  }\n\n  onDateChanged(){\n    this.checkLimits();\n  }\n\n  checkLimits(){\n    this.atMax = this.timeUtils.datesEqual(this.dateStruct,this.maxDateStruct);\n    this.atMin = this.timeUtils.datesEqual(this.dateStruct,this.minDateStruct);\n  }\n  // TODO not enforcing limits etc...\n\n  checkReference(): any {\n    if(!this.referenceDate){\n      return;\n    }\n\n    let refComponents = InterpolationService.interpolate(this.referenceDate,{\n      year:this.date.getFullYear(),\n      month:this.date.getMonth()+1,\n      date:this.date.getDate()\n    }).split('-').map(s=>+s);\n\n    let currentRef = new Date(Date.UTC(refComponents[0],refComponents[1]-1,refComponents[2]));\n\n    console.log('currentRef',currentRef);\n    console.log('currentDate',this.date);\n    let timeSpan = MILLISECONDS_PER_DAY * this.stepDays;\n\n    let days = (this.date.getTime() - currentRef.getTime())/timeSpan;\n    this.date = new Date(currentRef.getTime() + Math.round(days)*timeSpan);\n    this.dateStruct = this.timeUtils.convertDate(this.date);\n  }\n\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { MappedLayer, Publication, LayerTagValue, LayerTagMap,\n  PointSelectionService, PointSelection } from 'map-wald';\nimport { LayeredMapComponent } from '../layered-map/layered-map.component';\nimport { GeometryObject, Feature } from 'geojson';\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'layer-properties',\n  template: `<div class=\"container-fluid\">\n  <p><strong>{{layer?.title}}</strong>\n    <span *ngIf=\"layer.description()\"\n    [ngbTooltip]=\"layer.description()\"\n    [placement]=\"tooltipPlacement\"\n    class=\"layer-info-target\"\n    container=\"body\">\n  &nbsp;<i class=\"fa fa-info-circle\"></i>\n  </span>\n  &nbsp;<span *ngIf=\"layer.interpolatedDownloadURL\">\n    <small><a target=\"_blank\"\n              [href]=\"layer.interpolatedDownloadURL\"\n              [ngbTooltip]=\"'Download data'\"\n              container=\"body\">\n      <i class=\"fa fa-download\"></i>\n    </a></small>\n  </span>\n  </p>\n\n  <div *ngIf=\"layer?.layer.publications.length>1\">\n    <span *ngIf=\"layer.layer.publications[0].timestep\">Timestep </span>\n    <span *ngIf=\"!layer.layer.publications[0].timestep\">{{ layer.layer.options.publicationLabel || 'Variable' }} </span>\n    <select [(ngModel)]=\"layer.options.publication\" (ngModelChange)=\"publicationSelected($event)\">\n      <option *ngFor=\"let p of layer.layer.publications; let i=index\" [ngValue]=\"i\">{{p.label || p.timestep}}</option>\n    </select>\n  </div>\n  <div *ngIf=\"layer?.layer.publications.length===1\">\n    {{publication?.label}}\n  </div>\n\n  <div *ngIf=\"publication&&publication.timestep\">\n    <hr/>\n    <date-selection [(date)]=\"layer.options.date\"\n      (dateChange)=\"update($event)\"\n      [timestep]=\"publication.timestep\"\n      [stepDays]=\"publication.timestepMultiplier||1\"\n      [referenceDate]=\"publication.timestepReference\"\n      [minDate]=\"publication.options.start\"\n      [maxDate]=\"publication.options.end\"></date-selection>\n  </div>\n\n  <div *ngIf=\"layer.layer.options.smallExtent\">\n    <hr/>\n    <button class=\"btn btn-sm btn-primary\" (click)=\"zoomToExtent()\">Zoom to Extent</button>\n  </div>\n\n<!--\n  <div *ngIf=\"layer.layer.options.vectors\">\n    <p>Lets filter those {{layer.layer.options.vectors}}s, eh?</p>\n  </div>\n-->\n\n  <div *ngIf=\"availableTags\">\n    <div *ngFor=\"let tag of getKeys(availableTags)\">\n      {{tag}}\n      <select [(ngModel)]=\"tags[tag]\" (ngModelChange)=\"tagChanged(tag)\">\n        <option *ngFor=\"let val of availableTags[tag]\" [ngValue]=\"val.value\">{{val.label}}</option>\n      </select>\n    </div>\n  </div>\n\n  <div *ngIf=\"publication?.pointdata\">\n    Variable:\n    <select [(ngModel)]=\"selectedVariable\" (ngModelChange)=\"queryPointData()\">\n      <option *ngFor=\"let v of pointVariables\" [ngValue]=\"v.value\">{{v.label}}</option>\n    </select>\n  </div>\n  <!--\n  <div *ngIf=\"publication\">\n    <p>Start: {{publication.options.start}}</p>\n    <p>End: {{publication.options.end}}</p>\n    <p>{{publication|json}}</p>\n  </div>\n  <button (click)=\"update()\">Force update...</button>\n  -->\n</div>`, styles: []\n})\nexport class LayerPropertiesComponent implements AfterViewInit, OnDestroy {\n  getKeys = Object.keys;\n  @Input() layer: MappedLayer;\n  @Input() map: LayeredMapComponent;\n  @Output() propertyChanged = new EventEmitter();\n  @Input() tooltipPlacement: string = 'right';\n  availableTags: LayerTagMap = null;\n  tags: { [key: string]: string } = {}\n  pointVariables: LayerTagValue[] = [];\n  selectedVariable: string;\n  selectedFeature: Feature<GeometryObject>;\n  selectedFeatureSubscription: any;\n\n  constructor(private pointSelectionService: PointSelectionService) {\n\n  }\n\n  get publication(): (Publication | null) {\n    if (!this.layer || !this.layer.layer || !this.layer.layer.publications) {\n      return null;\n    }\n    return this.layer.layer.publications[this.layer.options.publication || 0];\n  }\n\n  ngAfterViewInit() {\n    // if(this.layer){\n    //   this.publication=this.layer.layer.publications[this.layer.options.publication||0];\n    // }\n    // if (this.layer &&\n    //   this.layer.layer.options.smallExtent &&\n    //   !this.layer.spatialExtent) {\n    //   this.loadExtent();\n    // }\n    if (this.map) {\n      this.selectedFeatureSubscription =\n        this.map.featureSelected.subscribe((evt: { feature: Feature<GeometryObject>, layer?: MappedLayer }) => this.featureSelected(evt));\n    }\n\n    if (this.layer) {\n      setTimeout(() => {\n        this.findTags();\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.selectedFeatureSubscription) {\n      this.selectedFeatureSubscription.unsubscribe();\n    }\n  }\n\n  featureSelected(evt: { feature: Feature<GeometryObject>, layer?: MappedLayer }) {\n    if (!this.publication || !this.publication.pointdata) {\n      return;\n    }\n    this.selectedFeature = evt.feature;\n    // No guarantee that this is from the same layer!!!!\n    this.queryPointData();\n  }\n\n  publicationSelected(idx: number) {\n    this.layer.options.publication = idx;\n    // this.publication=this.layer.layer.publications[idx];\n    if (this.publication.pointdata) {\n      this.pointSelectionChanged();\n      this.updateVariables();\n    }\n\n    this.update(idx);\n  }\n\n  updateLayer() {\n    this.layer.options.tags = this.tags;\n    this.layer.update();\n    this.propertyChanged.emit(this.layer);\n  }\n\n  update(event: any) {\n    this.updateLayer();\n\n    setTimeout(() => {\n      this.findTags();\n    });\n  }\n\n  processTags(tags: { [key: string]: Array<string | LayerTagValue> }): LayerTagMap {\n    if (!tags) {\n      return null;\n    }\n\n    let result: LayerTagMap = {};\n\n    Object.keys(tags).forEach(k => {\n      let values: Array<string | LayerTagValue> = tags[k];\n      result[k] = values.map(v => {\n        let vAsTag = <LayerTagValue>v;\n        if (vAsTag.value && vAsTag.label) {\n          return vAsTag;\n        }\n        let vAsString = <string>v;\n        return {\n          value: vAsString,\n          label: vAsString\n        };\n      })\n    })\n    return result;\n  }\n\n  findTags() {\n    if (this.publication.pointdata) {\n      this.availableTags = this.processTags(this.publication.pointdata.tags);\n    } else {\n      this.availableTags = this.processTags(this.layer.flattenedSettings.options.tags);\n    }\n    this.setDefaultTags();\n  }\n\n  tagChanged(t: string) {\n    this.queryPointData();\n    this.update(null);\n  }\n\n  setDefaultTags() {\n    if (!this.availableTags) {\n      return;\n    }\n\n    Object.keys(this.availableTags).forEach(tag => {\n      if (this.tags[tag] === undefined) {\n        this.tags[tag] = this.availableTags[tag][0].value;\n      }\n    });\n\n    this.updateLayer();\n  }\n\n  zoomToExtent() {\n    if (!this.map) {\n      console.log('NO MAP!');\n      return;\n    }\n\n    this.map.lat = this.layer.layer.lat;\n    this.map.lng = this.layer.layer.lon;\n    this.map.zoom = this.layer.layer.zoom || 13;\n  }\n\n  pointSelection(): PointSelection {\n    return {\n      catalog: this.publication.pointdata,\n      variable: this.selectedVariable,\n      feature: this.selectedFeature,\n      tags: this.tags\n    };\n  }\n\n  queryPointData() {\n    let pointdata = this.publication && this.publication.pointdata;\n\n    if (!this.publication || !this.publication.pointdata) {\n      return;\n    }\n\n    this.pointSelectionChanged();\n    this.updateVariables();\n  }\n\n  updateVariables(){\n    let sel = this.pointSelection();\n    this.pointSelectionService.timeseriesVariables(\n      sel).subscribe(variables => {\n        this.pointVariables = variables.slice();\n        if(this.publication.pointdata.exclude){\n          this.pointVariables = this.pointVariables.filter(v=>{\n            return !this.publication.pointdata.exclude.some(pattern=>{\n              return !!v.value.match(pattern);\n            });\n          });\n        }\n        if(!this.pointVariables.length){\n          this.selectedVariable = null;\n        } else if (this.pointVariables.findIndex(t=>t.value===this.selectedVariable) < 0) {\n          if (this.pointVariables.findIndex(t=>t.value===this.publication.pointdata.defaultVariable) >= 0) {\n            this.selectedVariable = this.publication.pointdata.defaultVariable;\n          } else {\n            this.selectedVariable = this.pointVariables[0].value;\n          }\n        }\n        this.pointSelectionChanged();\n      });\n  }\n\n  pointSelectionChanged() {\n    this.pointSelectionService.pointSelection(this.pointSelection());\n  }\n}\n","import { Component, Input, ViewChild, AfterViewInit, ElementRef, OnChanges, SimpleChanges, Output, EventEmitter } from '@angular/core';\nimport { MappedLayer, MetadataService } from \"map-wald\";\nimport { LayeredMapComponent } from '../layered-map/layered-map.component';\n\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'layer-control',\n  template: `<div class=\"layers-control\">\n  <div *ngIf=\"showLegends\" class=\"layers-control-header\"> <!-- header -->\n    <div class=\"float-right\">\n      <!-- TODO Attach handlers and tooltips to each icon -->\n      <i class=\"fa fa-lg fa-cog discrete-icon\" (click)=\"allLegends(false)\"></i>\n      <i class=\"fa fa-lg fa-th-list discrete-icon\" (click)=\"allLegends(true)\"></i>\n    </div>\n    <br/>\n  </div>\n\n  <div *ngIf=\"layers\">\n    <div *ngFor=\"let l of layers; let i = index\"\n         class=\"layer-control d-flex justify-content-between\">\n      <div class=\"p-2\" style=\"width:100%\">\n        <div *ngIf=\"showLegends&&l.options.legend\">\n          <div *ngIf=\"l.flattenedSettings?.palette || l.legendURL\">\n            <map-legend [title]=\"l.title\"\n              [imageURL]=\"l.legendURL\"\n              [helpText]=\"l.description()\"\n              [mapUnits]=\"l.flattenedSettings?.units\"\n              [cbPalette]=\"l.flattenedSettings?.palette?.name||l.flattenedSettings?.palette\"\n              [cbCount]=\"l.flattenedSettings?.numcolorbands||l.flattenedSettings?.palette?.count\"\n              [cbReverse]=\"l.flattenedSettings?.palette?.reverse\"\n              [cbRange]=\"l.flattenedSettings?.colorscalerange\">\n            </map-legend>\n          </div>\n        </div>\n\n        <div *ngIf=\"!showLegends||!l.options.legend\">\n          <layer-properties [layer]=\"l\"\n                            [map]=\"map\"\n                            (propertyChanged)=\"layerPropertyChanged($event)\">\n          </layer-properties>\n        </div>\n      </div>\n      <div class=\"p-2\">\n          <div>\n            <!-- TODO Attach handlers and tooltips to each icon -->\n            <i *ngIf=\"allowReorder\" class=\"fa fa-bars discrete-icon\"></i><br *ngIf=\"allowReorder\"/>\n            <i *ngIf=\"showLegends\" class=\"fa fa-cog discrete-icon\"\n               ngbTooltip=\"Show layer controls\" placement=\"right\" data-container=\"body\"\n               (click)=\"layerLegend(l,false)\"></i><br *ngIf=\"showLegends\"/>\n            <i *ngIf=\"showLegends\" class=\"fa fa-th-list discrete-icon\"\n               ngbTooltip=\"Show layer data\" placement=\"right\" data-container=\"body\"\n               (click)=\"layerLegend(l,true)\"></i><br *ngIf=\"showLegends\"/>\n            <i *ngIf=\"allowReorder\" class=\"fa fa-angle-double-up discrete-icon\"\n               ngbTooltip=\"Move to top\" placement=\"right\" data-container=\"body\"\n              (click)=\"moveToTop(i)\"></i><br *ngIf=\"allowReorder\"/>\n            <i *ngIf=\"allowReorder\" class=\"fa fa-angle-up discrete-icon\"\n               ngbTooltip=\"Move up\" placement=\"right\" data-container=\"body\"\n              (click)=\"moveUp(i)\"></i><br *ngIf=\"allowReorder\"/>\n            <i *ngIf=\"allowReorder\" class=\"fa fa-angle-down discrete-icon\"\n               ngbTooltip=\"Move down\" placement=\"right\" data-container=\"body\"\n              (click)=\"moveDown(i)\"></i><br *ngIf=\"allowReorder\"/>\n            <i *ngIf=\"allowReorder\" class=\"fa fa-angle-double-down discrete-icon\"\n               ngbTooltip=\"Move to bottom\" placement=\"right\" data-container=\"body\"\n              (click)=\"moveToBottom(i)\"></i><br *ngIf=\"allowReorder\"/>\n            <i *ngIf=\"allowRemove\" class=\"fa fa-times discrete-icon\"\n               ngbTooltip=\"Remove layer\" placement=\"right\" data-container=\"body\"\n              data-toggle=\"tooltip\" title=\"Remove layer\"\n              (click)=\"removeLayer(i)\"></i>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n\n<!-- Should this control be outside the map? eg to the left? -->\n`,styles: [`.layers-control{\n  width:200px;\n}\n\n\n.layers-control-header, .layer-control{\n  border-bottom: 1.5px solid #aaa;\n}`]})\nexport class LayerControlComponent implements AfterViewInit, OnChanges {\n  @Input() layers: MappedLayer[];\n  @Input() map: LayeredMapComponent;\n  @Input() allowRemove = true;\n  @Input() showLegends = true;\n  @Input() allowReorder = true;\n  @Output() layersChange = new EventEmitter<MappedLayer[]>();\n  uniformViewMode: boolean | undefined;\n  foo: string = 'bar';\n\n  constructor(private metadata:MetadataService) {\n\n  }\n\n  ngAfterViewInit() {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!changes.layers || !this.layers) {\n      return;\n    }\n    this.applyViewMode();\n    this.fetchMetadata();\n  }\n\n  applyViewMode(){\n    if (this.uniformViewMode === undefined) {\n      return;\n    }\n\n    this.layers.forEach(l => l.options.legend = this.uniformViewMode);\n  }\n\n  allLegends(showLegend: boolean) {\n    this.uniformViewMode = showLegend;\n    this.layers.forEach(l => l.options.legend = showLegend);\n  }\n\n  layerLegend(layer: MappedLayer, showLegend: boolean) {\n    this.uniformViewMode = undefined;\n    layer.options.legend = showLegend;\n  }\n\n  moveToTop(idx: number) {\n    this.layers = [this.layers[idx]].concat(this.layers.slice(0, idx)).concat(this.layers.slice(idx + 1));\n    this._changed();\n  }\n\n  moveUp(idx: number) {\n    if (idx === 0) {\n      return;\n    }\n\n    var layers = this.layers;\n    this.layers = layers.slice(0, idx - 1).concat([layers[idx], layers[idx - 1]]).concat(layers.slice(idx + 1));\n    this._changed();\n  }\n\n  moveDown(idx: number) {\n    if (idx === (this.layers.length - 1)) {\n      return;\n    }\n\n    var layers = this.layers;\n    this.layers = layers.slice(0, idx).concat([layers[idx + 1], layers[idx]]).concat(layers.slice(idx + 2));\n    this._changed();\n  }\n\n  moveToBottom(idx: number) {\n    this.layers = this.layers.slice(0, idx).concat(this.layers.slice(idx + 1)).concat([this.layers[idx]]);\n    this._changed();\n  }\n\n  removeLayer(idx: number) {\n    var layers = this.layers.slice();\n    layers.splice(idx, 1);\n    this.layers = layers;\n    this._changed();\n  }\n\n  layerPropertyChanged(l: MappedLayer) {\n    this.layers = this.layers.slice();\n    this._changed();\n  }\n\n  private _changed() {\n    this.fetchMetadata();\n    this.layersChange.emit(this.layers);\n  }\n\n  fetchMetadata(){\n    this.layers.forEach(ml=>{\n      this.metadata.populateMetadata(ml);\n    })\n  }\n}\n","import { Component, Input, Output,\n         AfterViewInit, EventEmitter } from '@angular/core';\nimport { Catalog, Layer, LayerSelection, LayerAction } from \"map-wald\";\n\ndeclare var Plotly: any;\n\n@Component({\n  selector: 'theme-navbar',\n  template: `<ul class=\"navbar-nav\">\n  <li class=\"nav-item\" ngbDropdown *ngFor=\"let theme of catalog?.themes\">\n    <a class=\"nav-link\" ngbDropdownToggle href=\"#\"><i class=\"fa\" [ngClass]=\"theme.icon\"></i></a>\n    <div ngbDropdownMenu class=\"dropdown-menu\">\n      <a class=\"dropdown-item\" href=\"#\" (click)=\"layerClick($event,layer,'replace')\" *ngFor=\"let layer of theme.layers\">\n        <div>\n          <span>{{layer.name}}</span>\n          <span class=\"float-right layer-select-icons\">\n            <i class=\"fa fa-map layer-select-icon discrete-icon\"\n               (click)=\"layerClick($event,layer,'replace')\"\n               placement=\"right\"\n               ngbTooltip=\"Map this layer. (Replace any existing layers)\"></i>\n            <br/>\n            <i class=\"fa fa-plus layer-select-icon discrete-icon\"\n               (click)=\"layerClick($event,layer,'add')\"\n               placement=\"right\"\n               ngbTooltip=\"Add this layer to the map.\"></i>\n          </span>\n        </div>\n      </a>\n    </div>\n  </li>\n</ul>\n\n<!--\n\n[ng-reflect-ngb-tooltip].yellow + .tooltip {\n    background-color: yellow;\n}\n-->`,styles: [`\n.layer-select-icons{\n  font-size:0.75em;\n  margin-right:-20px;\n}\n\n/* Annoying... using /deep/ to access the child component\n * but /deep/ (and synonyms) are deprecated. Not clear what\n * we should be doing\n */\n/deep/ .tooltip-inner {\n  width: 400px;\n}\n\n.dropdown-item{\n  border-bottom: 1px solid #aaa;\n  height: 40px;\n}\n`]})\nexport class ThemeNavbarComponent implements AfterViewInit  {\n  @Input() catalog:Catalog;\n  @Input() includeSearch:boolean;\n\n  @Output() layerSelected:EventEmitter<LayerSelection> = new EventEmitter<LayerSelection>();\n\n  constructor(){\n\n  }\n\n  ngAfterViewInit(){\n\n  }\n\n  layerClick(event:any,layer:Layer,action:LayerAction){\n    this.stop(event);\n    var selection = {\n      layer:layer,\n      action:action\n    };\n\n    this.layerSelected.emit(selection);\n  }\n\n  stop(event:any){\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {MapsAPILoader} from '@agm/core';\nimport {Observable, from} from 'rxjs';\n\ndeclare var google:any;\n\nexport interface GeocodingResult {\n  formatted_address:string;\n  coords: number[]\n}\n\n@Injectable()\nexport class GeocodingService {\n  constructor(private _api:MapsAPILoader){\n\n  }\n\n  geocode(address:string,bnds?:any):Observable<GeocodingResult[]>{\n    var promise = new Promise<GeocodingResult[]>((resolve,reject)=>{\n      this._api.load().then(()=>{\n        const SUCCESS_STATUSES = [\n          google.maps.GeocoderStatus.OK,\n          google.maps.GeocoderStatus.ZERO_RESULTS\n        ];\n        var service = new google.maps.Geocoder();\n        service.geocode({\n          address:address,\n          componentRestrictions: {\n            country: 'AU'\n          },\n          region:'AU'\n        },(results:GeocodingResult[],status:any)=>{\n          if(SUCCESS_STATUSES.indexOf(status)<0){\n            reject();\n          } else {\n            resolve(results.filter(function(r:any){\n              return r.formatted_address!=='Australia';\n            }));\n          }\n        });\n      });\n    });\n\n    return from(promise);\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgPipesModule } from 'ngx-pipes';\nimport { AgmCoreModule } from '@agm/core';\nimport { CommonModule } from '@angular/common';\nimport { MapWaldCoreModule } from 'map-wald';\n\nimport { WMSLayerComponent } from './wms-layer/wms-layer.component';\nimport { MapLegendComponent } from './map-legend/map-legend.component';\nimport { MapControlComponent } from './map-control/map-control.component';\nimport { DateShifterComponent } from './date-shifter/date-shifter.component';\nimport { OneTimeSplashComponent } from './one-time-splash/one-time-splash.component';\nimport { DateElementComponent } from './date-element/date-element.component';\nimport { ShareViewComponent } from './share-view/share-view.component';\nimport { LocationSearchComponent } from './location-search/location-search.component';\nimport { ZoomLayerComponent } from './action-buttons/zoom-layer/zoom-layer.component';\nimport { ZoomFullComponent } from './action-buttons/zoom-full/zoom-full.component';\nimport { ZoomOutComponent } from './action-buttons/zoom-out/zoom-out.component';\nimport { ZoomInComponent } from './action-buttons/zoom-in/zoom-in.component';\nimport {CycleBaseMapComponent} from './action-buttons/cycle-base-map/cycle-base-map.component';\nimport {CycleOpacityComponent} from './action-buttons/cycle-opacity/cycle-opacity.component';\nimport { ButtonBarComponent } from './button-bar/button-bar.component';\nimport { TimeseriesChartComponent } from './timeseries-chart/timeseries-chart.component';\nimport { FeatureTableComponent } from './feature-table/feature-table.component';\nimport { CollapsibleMapControlComponent } from './collapsible-map-control/collapsible-map-control.component';\nimport { BaseMapSelectionComponent } from './base-map-selection/base-map-selection.component';\nimport { SimpleTreeNodeComponent } from './simple-tree-node/simple-tree-node.component';\nimport { SimpleTreeComponent } from './simple-tree/simple-tree.component';\nimport { CatalogComponent } from './catalog/catalog.component';\nimport { DateSelectionComponent } from './date-selection/date-selection.component';\nimport { LayerPropertiesComponent } from './layer-properties/layer-properties.component';\nimport { LayerControlComponent } from './layer-control/layer-control.component';\nimport { LayeredMapComponent } from './layered-map/layered-map.component';\nimport { ThemeNavbarComponent } from './theme-navbar/theme-navbar.component';\n\nimport { GeocodingService } from './geocoding.service';\n\nexport * from './wms-layer/wms-layer.component';\nexport * from './map-legend/map-legend.component';\nexport * from './date-shifter/date-shifter.component';\nexport * from './one-time-splash/one-time-splash.component';\nexport * from './date-element/date-element.component';\nexport * from './share-view/share-view.component';\nexport * from './location-search/location-search.component';\nexport * from './action-buttons/zoom-layer/zoom-layer.component';\nexport * from './action-buttons/zoom-full/zoom-full.component';\nexport * from './action-buttons/zoom-out/zoom-out.component';\nexport * from './action-buttons/zoom-in/zoom-in.component';\nexport * from './action-buttons/cycle-base-map/cycle-base-map.component';\nexport * from './action-buttons/cycle-opacity/cycle-opacity.component';\n\nexport * from './button-bar/button-bar.component';\nexport * from './timeseries-chart/timeseries-chart.component';\nexport * from './feature-table/feature-table.component';\nexport * from './collapsible-map-control/collapsible-map-control.component';\nexport * from './base-map-selection/base-map-selection.component';\nexport * from './simple-tree-node/simple-tree-node.component';\nexport * from './simple-tree/simple-tree.component';\nexport * from './catalog/catalog.component';\nexport * from './date-selection/date-selection.component';\nexport * from './layer-properties/layer-properties.component';\nexport * from './layer-control/layer-control.component';\nexport * from './layered-map/layered-map.component';\nexport * from './theme-navbar/theme-navbar.component';\nexport * from './map-control/map-control.component';\n\nexport * from './geocoding.service';\n\n\nconst components = [\n  //$componentList\n  DateShifterComponent,\n  OneTimeSplashComponent,\n  DateElementComponent,\n  ShareViewComponent,\n  LocationSearchComponent,\n  ZoomLayerComponent,\n  ZoomFullComponent,\n  ZoomOutComponent,\n  ZoomInComponent,\n  CycleBaseMapComponent,\n  CycleOpacityComponent,\n  ButtonBarComponent,\n  TimeseriesChartComponent,\n  FeatureTableComponent,\n  CollapsibleMapControlComponent,\n  BaseMapSelectionComponent,\n  SimpleTreeNodeComponent,\n  SimpleTreeComponent,\n  CatalogComponent,\n  DateSelectionComponent,\n  LayerPropertiesComponent,\n  LayerControlComponent,\n  LayeredMapComponent,\n  ThemeNavbarComponent,\n  WMSLayerComponent,\n  MapLegendComponent,\n  MapControlComponent\n];\n\nconst services = [\n  //$serviceList\n  GeocodingService\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    AgmCoreModule,\n    HttpClientModule,\n    NgPipesModule,\n    NgbModule,\n    MapWaldCoreModule\n  ],\n  declarations: components,\n  exports: components,\n  providers: services\n})\nexport class MapWaldBootstrapModule {\n  static forRoot(moduleInitialisation:any): ModuleWithProviders<MapWaldBootstrapModule> {\n    return {\n      ngModule: MapWaldBootstrapModule,\n      providers: services\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["core_1","google_maps_types_1","map_wald_1","core_2","Plotly","rxjs_1","operators_1","date_shifter_component_1","one_time_splash_component_1","date_element_component_1","share_view_component_1","location_search_component_1","zoom_layer_component_1","zoom_full_component_1","zoom_out_component_1","zoom_in_component_1","cycle_base_map_component_1","cycle_opacity_component_1","button_bar_component_1","timeseries_chart_component_1","feature_table_component_1","collapsible_map_control_component_1","base_map_selection_component_1","simple_tree_node_component_1","simple_tree_component_1","catalog_component_1","date_selection_component_1","layer_properties_component_1","layer_control_component_1","layered_map_component_1","theme_navbar_component_1","wms_layer_component_1","map_legend_component_1","map_control_component_1","geocoding_service_1","common_1","forms_1","http_1","ngx_pipes_1","ng_bootstrap_1"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKA;QAUE,2BAAoB,WAAsB,EACvB,QAA6B;YAD5B,gBAAW,GAAX,WAAW,CAAW;YACvB,aAAQ,GAAR,QAAQ,CAAqB;YAJvC,YAAO,GAAQ,GAAG,CAAC;YACnB,aAAQ,GAAQ,CAAC,CAAC;YAM3B,SAAI,GAAW,CAAC,CAAC;YAET,aAAQ,GAAS,KAAK,CAAC;SALqB;QAMpD,oCAAQ,GAAR;YAAA,iBA0BC;YAzBC,IAAG,IAAI,CAAC,QAAQ;gBACd,OAAO;YACT,IAAI,CAAC,QAAQ,GAAC,IAAI,CAAC;YAEnB,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,UAAC,MAAM;gBACvC,KAAI,CAAC,QAAQ,GAAC,KAAK,CAAC;gBACpB,KAAI,CAAC,GAAG,GAAG,MAAM,CAAC;gBAClB,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,WAAW,CAAC,aAAa,CACzC,cAAI,OAAA,KAAI,CAAC,GAAG,GAAA,EACZ,UAAC,CAAC,IAAG,OAAA,KAAI,CAAC,GAAG,GAAC,GAAG,GAAA,EACjB,UAAC,CAAC,IAAG,OAAA,KAAI,CAAC,MAAM,GAAA,EAChB,cAAI,OAAA,KAAI,CAAC,OAAO,GAAA,CACjB,CAAC;gBAEJ,IAAG,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,GAAC,KAAI,CAAC,QAAQ,EAAC;oBAC/C,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;oBACjD,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAI,CAAC,QAAQ,EAAC,KAAI,CAAC,OAAO,CAAC,CAAC;iBAC/D;qBAAM;oBACL,OAAM,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,IAAE,KAAI,CAAC,QAAQ,EAAC;;;wBAGnD,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;qBAC7C;iBACF;aACF,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC,IAAG,OAAA,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC;SAC/B;QAED,oCAAQ,GAAR;YACE,IAAG,IAAI,CAAC,GAAG,EAAC;gBACV,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB;SACF;QAED,uCAAW,GAAX,UAAY,OAAsB;YAChC,IAAG,IAAI,CAAC,GAAG,EAAC;gBACV,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB;;;;;;;SAQF;QAED,uCAAW,GAAX;YAAA,iBAMC;YALC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,UAAC,MAAM;gBACvC,IAAG,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,MAAM,GAAC,KAAI,CAAC,QAAQ,EAAC;oBAC/C,KAAI,CAAC,GAAG,CAAC,eAAe,CAAC,QAAQ,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;iBAClD;aACF,CAAC,CAAC;SACJ;0FAlEU,iBAAiB;8DAAjB,iBAAiB;gCAT9B;KAKA,IAuEC;IAnEY,8CAAiB;sDAAjB,iBAAiB;kBAJ7BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,WAAW;oBACrB,QAAQ,EAAC,EAAE;iBACZ;oGAEU,GAAG;sBAAXA,UAAK;gBACG,MAAM;sBAAdA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;;;;;;;;;;;;;;;;;;;QCNN,0BAAkC;;;QAA5B,8DAAoB;;;QAEV,0BAA6D;;;QAAtC,0EAA8B;;;QAC/D,+BAIE;QAAA,uBAAiC;QACnC,iBAAO;;;;QAJD,gCAA6B,sCAAA;;;;QASrC,+BAEE;QAAA,+BACE;QAAA,wBAA4D;QAC9D,iBAAM;QACN,+BACE;QAAA,0BAA8C;QAChD,iBAAM;QACR,iBAAM;;;;;QALsB,eAA+B;QAA/B,+DAA+B;QAGjD,eAAgC;QAAhC,4EAAgC;;;QAR9C,2BACE;QAAA,8BACE;QAAA,0EAQM;QACR,iBAAM;QACR,iBAAM;;;QATqB,eAAY;QAAZ,wCAAY;;;QAWvC,2BACE;QAAA,0BACF;QAAA,iBAAM;;;QADC,eAAgB;QAAhB,uDAAgB;;;QAEvB,yBAA2B;QAAA,wBAAQ;QAAA,6BAA4B;QAAA,YAA4B;QAAA,iBAAI;QAAA,iBAAI;;;QAA7D,eAAwB;QAAxB,+DAAwB;QAAC,eAA4B;QAA5B,qDAA4B;;;QAC3F,yBAAyC;QAAA,YAAuB;QAAA,iBAAI;;;QAA3B,eAAuB;QAAvB,yDAAuB;;IAjClE;QA+JE,4BAAoB,SAAwB;YAAxB,cAAS,GAAT,SAAS,CAAe;YAlGnC,YAAO,GAAkB,CAAC,KAAK,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC;YAClD,WAAM,GAAkB,EAAE,CAAC;YAC3B,UAAK,GAAW,WAAW,CAAC;YAC5B,aAAQ,GAAW,EAAE,CAAC;YACtB,aAAQ,GAAQ,YAAY,CAAC;YAC7B,qBAAgB,GAAQ,OAAO,CAAC;YAIzC,oBAAe,GAAa,EAAE,CAAC;YAmE/B,gBAAW,GAAG,UAAS,GAAU,EAAC,aAAoB;gBACpD,IAAG,CAAC,GAAG,EAAC;oBACN,IAAG,GAAG,KAAG,CAAC,EAAC;wBACT,OAAO,GAAG,CAAC;qBACZ;oBACD,OAAO,GAAG,CAAC;iBACZ;;gBAED,IAAI,KAAK,GAAG,GAAG,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACtC,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC,CAAC;gBAE1D,IAAG,aAAa,KAAG,CAAC,EAAC;oBACnB,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;iBACjB;gBAED,IAAG,CAAC,aAAa,KAAG,IAAI,MAAK,aAAa,KAAG,SAAS,CAAC,KAAK,KAAK,CAAC,MAAM,KAAG,CAAC,CAAC,EAAC;oBAC5E,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,EAAC,aAAa,CAAC,CAAC;oBAC5C,KAAK,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;iBACxC;gBACD,OAAO,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACxB,CAAC;SAE+C;QAnFjD,sBAAa,yCAAS;iBAKtB,cAAuB,OAAO,IAAI,CAAC,UAAU,CAAC,EAAC;iBAL/C,UAAuB,GAAU;gBAC/B,IAAI,CAAC,UAAU,GAAG,GAAG,CAAC;gBACtB,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;;;WAAA;QAID,sBAAa,uCAAO;iBAKpB,cAAqB,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAC;iBAL3C,UAAqB,GAAU;gBAC7B,IAAI,CAAC,QAAQ,GAAC,GAAG,CAAC;gBAClB,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;;;WAAA;QAID,sBAAa,yCAAS;iBAKtB,cAAwB,OAAO,IAAI,CAAC,UAAU,CAAC,EAAC;iBALhD,UAAuB,GAAW;gBAChC,IAAI,CAAC,UAAU,GAAC,GAAG,CAAC;gBACpB,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;;;WAAA;QAID,sBAAa,uCAAO;iBAKpB,cAA4B,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAC;iBALlD,UAAqB,GAAiB;gBACpC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC;gBACpB,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;;;WAAA;QAID,2CAAc,GAAd,UAAe,KAAY;YACzB,IAAG,CAAC,IAAI,CAAC,QAAQ,IAAE,CAAC,KAAK,EAAC;gBACxB,OAAO,IAAI,CAAC;aACb;YAED,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,KAAG,KAAK,CAAC,CAAC;YACxD,IAAI,MAAM,GAAG,EAAE,CAAC;YAChB,IAAI,KAAK,GAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC3B,IAAK,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAC,CAAC,IAAE,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;YAC9F,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,aAAa,EAAC,EAAE,CAAC,CAAC;YAC3C,IAAI,KAAK,CAAC;YACV,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,IAAE,KAAK,CAAC,EAAC,CAAC,EAAE,EAAC;gBACxB,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAC,CAAC,GAAC,KAAK,CAAC;gBACjC,MAAM,CAAC,IAAI,CAAI,IAAI,CAAC,WAAW,CAAC,KAAK,EAAC,aAAa,CAAC,SAAI,IAAI,CAAC,WAAW,CAAC,KAAK,EAAC,aAAa,CAAG,CAAC,CAAC;gBACjG,KAAK,GAAG,KAAK,CAAC;aACf;YACD,MAAM,CAAC,IAAI,CAAC,MAAM,GAAC,IAAI,CAAC,WAAW,CAAC,KAAK,EAAC,aAAa,CAAC,CAAC,CAAC;YAC1D,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,OAAO,MAAM,CAAC;SACf;QAED,4CAAe,GAAf;YAAA,iBAUC;YATC,IAAG,CAAC,IAAI,CAAC,UAAU,IAAE,CAAC,IAAI,CAAC,QAAQ,EAAC;gBAClC,OAAO;aACR;YAED,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,QAAQ,CAAC;iBACrE,SAAS,CAAC,UAAA,OAAO;gBAChB,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,EAAE,CAAC,OAAO,EAAE,CAAC;gBACzC,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,MAAM,IAAI,KAAI,CAAC,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC;aAC7F,CAAC,CAAC;SACJ;QA0BD,qCAAQ,GAAR,eAAc;4FAtGH,kBAAkB;+DAAlB,kBAAkB;gBAzDlB,8BACb;gBAAA,oHAEc;gBACd,8BAAQ;gBAAA,YAAU;gBAAA,qEAA6D;gBACvE,qEAKO;gBACf,iBAAS;gBAEP,mEAYM;gBAEN,mEAEM;gBACN,+DAAmG;gBACnG,iEAAoE;gBACtE,iBAAM;;gBA5BE,eAAU;gBAAV,yCAAU;gBAAO,eAAc;gBAAd,mCAAc;gBACxB,eAAc;gBAAd,mCAAc;gBAQrB,eAAe;gBAAf,oCAAe;gBAcf,eAAc;gBAAd,mCAAc;gBAGhB,eAAqB;gBAArB,0CAAqB;gBACrB,eAAmC;gBAAnC,8DAAmC;;iCApCzC;KAGA,IAmKC;IAxGY,gDAAkB;sDAAlB,kBAAkB;kBA3D9BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,qqCAiCX,EAAC,MAAM,EAAE,CAAC,4UAuBV,CAAC;iBAAC;qEAEQ,QAAQ;sBAAhBA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,MAAM;sBAAdA,UAAK;gBACG,KAAK;sBAAbA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;gBACG,gBAAgB;sBAAxBA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBACG,eAAe;sBAAvBA,UAAK;gBAQO,SAAS;sBAArBA,UAAK;gBAOO,OAAO;sBAAnBA,UAAK;gBAOO,SAAS;sBAArBA,UAAK;gBAOO,OAAO;sBAAnBA,UAAK;;;;;;;;;;;;;;;;;;ICjGR;QAcE,6BAAoB,GAAc,EAAS,QAA6B;YAApD,QAAG,GAAH,GAAG,CAAW;YAAS,aAAQ,GAAR,QAAQ,CAAqB;YAF/D,aAAQ,GAAU,WAAW,CAAC;SAEsC;QAE7E,sCAAQ,GAAR;SACC;QAED,6CAAe,GAAf;YAAA,iBAcC;YAbC,IAAI,CAAC,QAAQ,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,UAAC,CAAC;gBAClC,IAAI,OAAO,GAAgB,KAAI,CAAC,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,sBAAsB,CAAC,CAAC;;;gBAIxF,IAAI,OAAO,CAAC,QAAQ,KAAK,KAAK,EAAE;oBAC9B,IAAI,UAAU,GAAgB,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;oBAC5D,UAAU,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;oBAChC,OAAO,GAAG,UAAU,CAAC;iBACtB;gBAEK,CAAE,CAAC,QAAQ,CAAO,MAAO,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC3F,CAAC,CAAC;SACJ;8FAvBU,mBAAmB;gEAAnB,mBAAmB;;;;;;;gBARnB,iCACX;gBAAA,kBAAyB;gBAC3B,iBAAM;;kCAPN;KAGA,IAmCC;IAzBY,kDAAmB;sDAAnB,mBAAmB;kBAV/BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,aAAa;oBACvB,QAAQ,EAAE,wFAGX,EAAC,MAAM,EAAE,CAAC,wDAGV,CAAC;iBACD;oGAEyC,UAAU;sBAAjDA,cAAS;uBAAC,YAAY,EAAC,EAAC,MAAM,EAAC,KAAK,EAAC;gBAC7B,QAAQ;sBAAhBA,UAAK;;;;;;;;;;;;;;;ICVR;QA6BE;YAVS,aAAQ,GAAG,IAAI,CAAC;YAChB,WAAM,GAAU,IAAI,CAAC;YACrB,SAAI,GAAG,IAAI,IAAI,EAAE,CAAC;YACjB,eAAU,GAAG,IAAIA,iBAAY,EAAQ,CAAC;YAEhD,UAAK,GAAG,CAAC,CAAC;YACV,UAAK,GAAG,GAAG,CAAC;YACZ,UAAK,GAAU,CAAC,CAAC;YACjB,aAAQ,GAAG,GAAG,CAAC;SAGd;QAED,0CAAW,GAAX,UAAY,OAAsB;YAChC,IAAG,OAAO,CAAC,QAAQ,EAAC;gBAClB,IAAI,CAAC,UAAU,EAAE,CAAC;aACnB;SACF;QAED,yCAAU,GAAV;YAAA,iBAKC;YAJC,IAAG,IAAI,CAAC,KAAK,EAAC;gBACZ,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC3B;YACD,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC,cAAI,OAAA,KAAI,CAAC,IAAI,EAAE,GAAA,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;SAChE;QAED,8CAAe,GAAf;YACE,IAAI,CAAC,UAAU,EAAE,CAAC;SACnB;QAED,oCAAK,GAAL;YACE,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;YACf,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,mCAAI,GAAJ;YACE,IAAG,CAAC,IAAI,CAAC,KAAK,EAAC;gBACb,OAAO;aACR;YAED,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACnC,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YAC1C,QAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;gBACzB,KAAK,CAAC;oBACJ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,IAAI,CAAC,CAAC;oBAC5C,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,CAAC,GAAC,IAAI,CAAC,CAAC;oBAC9C,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAC,IAAI,CAAC,CAAC;oBAC9C,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,GAAC,IAAI,CAAC,CAAC;oBACpD,MAAM;aACT;YAED,IAAG,IAAI,CAAC,MAAM,IAAE,IAAI,CAAC,MAAM,CAAC,MAAM,EAAC;gBACjC,IAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,EAAC;oBAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;iBAC5B;gBACD,IAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,EAAC;oBAC9C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;iBAC5B;aACF;YACD,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjC;QACD,0CAAW,GAAX;YACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAChD;QAED,0CAAW,GAAX;YACE,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,uCAAQ,GAAR;YACE,IAAG,IAAI,CAAC,KAAK,GAAC,CAAC,EAAC;gBACd,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;aACvB;iBAAM,IAAG,IAAI,CAAC,KAAK,GAAC,CAAC,EAAC;gBACrB,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;aAC1B;iBAAM;gBACL,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;aAClB;YAED,QAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC;gBACzB,KAAK,CAAC;oBACJ,IAAI,CAAC,KAAK,IAAI,KAAK,CAAC;oBACpB,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC;oBACrB,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,KAAK,IAAI,OAAO,CAAC;oBACtB,MAAM;gBACR,KAAK,CAAC;oBACJ,IAAI,CAAC,KAAK,IAAI,MAAM,CAAC;oBACrB,MAAM;aACT;SACF;gGApGU,oBAAoB;iEAApB,oBAAoB;gBAhBpB,2BACX;gBAAA,0BAAI;gBAAA,YAAY;gBAAA,iBAAK;gBACrB,gCAQA;gBAHO,4IAAmB,mGACF,iBAAa,IADX,uFAER,WAAO,IAFC;gBAL1B,iBAQA;gBAAA,0BAAI;gBAAA,YAAS;gBAAA,iBAAK;gBACpB,iBAAM;;gBAVA,eAAY;gBAAZ,kCAAY;gBAIT,eAAS;gBAAT,uBAAS,sBAAA;gBAKZ,eAAS;gBAAT,+BAAS;;mCAjBf;KAKA,IAuHC;IArGY,oDAAoB;sDAApB,oBAAoB;kBAlBhCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,QAAQ,EAAE,2SAaT;oBACD,MAAM,EAAE,CAAC,EAAE,CAAC;iBACb;0CAEU,QAAQ;sBAAhBA,UAAK;gBACG,MAAM;sBAAdA,UAAK;gBACG,IAAI;sBAAZA,UAAK;gBACI,UAAU;sBAAnBA,WAAM;;;;;;;;;;;;;;;;;;;;;;QCNL,6BACE;QAAA,gCACA;QADuB,oOAAuB,iNAAA;QAA9C,iBACA;QAAA,YACF;QAAA,iBAAQ;;;QAFiB,eAAuB;QAAvB,0CAAuB;QAC9C,eACF;QADE,0DACF;;;QAdF,8BACE;QAAA,6BACE;QAAA,YAAS;QAAA,iBAAK;QAChB,iCACE;QADqD,8IAAW,aAAa,KAAE;QAC/E,+BAAyB;QAAA,sBAAO;QAAA,iBAAO;QACzC,iBAAS;QACX,iBAAM;QACN,8BACE;QAAA,kBAAyB;QAC3B,iBAAM;QACN,8BACE;QAAA,yFAGQ;QACR,kCAA2E;QAA3B,6IAAW,aAAa,KAAE;QAAC,sBAAK;QAAA,iBAAS;QAC3F,iBAAM;;;QAdF,eAAS;QAAT,4CAAS;QASH,eAAiB;QAAjB,yCAAiB;;;IAd7B;QAiCE,gCAAoB,YAAsB;YAAtB,iBAAY,GAAZ,YAAY,CAAU;YANjC,UAAK,GAAG,OAAO,CAAC;YAChB,gBAAW,GAAG,4CAA4C,CAAC;SAOnE;QAED,2CAAU,GAAV;YACE,IAAG,CAAC,IAAI,CAAC,WAAW,EAAC;gBACnB,OAAO,IAAI,CAAC;aACb;YAED,OAAO,IAAI,CAAC,WAAW,GAAI,cAAc,CAAC;SAC3C;QAED,gDAAe,GAAf;YAAA,iBAWC;YAVC,UAAU,CAAC;gBACT,IAAM,GAAG,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC;gBAC9B,IAAG,GAAG,EAAC;oBACL,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,EAAC,KAAK,CAAC,CAAC;iBACvC;gBAED,IAAG,CAAC,KAAI,CAAC,SAAS,EAAC;oBACjB,KAAI,CAAC,IAAI,EAAE,CAAC;iBACb;aACF,CAAC,CAAC;SACJ;QAED,qCAAI,GAAJ;YACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,EAAC;gBACxD,IAAI,EAAC,IAAI;gBACT,WAAW,EAAC,IAAI,CAAC,KAAK;aACvB,CAAC,CAAC;SACJ;QAED,sCAAK,GAAL;YACE,IAAG,CAAC,IAAI,CAAC,OAAO,EAAC;gBACf,OAAO;aACR;YAED,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;YACrB,IAAI,CAAC,OAAO,GAAC,IAAI,CAAC;SACnB;QAED,iDAAgB,GAAhB;YACE,IAAM,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAC9B,IAAG,CAAC,GAAG,EAAC;gBACN,OAAO;aACR;YAED,KAAK,CAAC,GAAG,CAAC,GAAG,EAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SAC/B;oGAzDU,sBAAsB;mEAAtB,sBAAsB;;;;;;;gBAtBtB,yHAkBG;;qCA3BhB;KAOA,IAkFC;IA1DY,wDAAsB;sDAAtB,sBAAsB;kBAxBlCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,iBAAiB;oBAC3B,QAAQ,EAAE,4tBAmBX;oBACC,MAAM,EAAE,CAAC,EAAE,CAAC;iBACb;+DAE6C,cAAc;sBAAzDA,cAAS;uBAAC,gBAAgB,EAAC,EAAC,MAAM,EAAC,KAAK,EAAC;gBACjC,WAAW;sBAAnBA,UAAK;gBACG,KAAK;sBAAbA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBACG,KAAK;sBAAbA,UAAK;;;;;;;;;;;;;;IC/BR;QAwBE;YAHS,SAAI,GAAG,CAAC,CAAC;YACR,YAAO,GAAG,IAAIA,iBAAY,EAAO,CAAC;SAI3C;QAED,8CAAe,GAAf;SAEC;QAED,mCAAI,GAAJ,UAAK,CAAQ;YACX,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAC7B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC7B;gGAlBU,oBAAoB;iEAApB,oBAAoB;gBAfpB,8BACX;gBAAA,8BAAmB;gBAAA,YAAS;gBAAA,iBAAM;gBAClC,8BACE;gBAAA,iCACE;gBADuC,iGAAS,mBAAW,IAAC;gBAC5D,uBAAgC;gBAClC,iBAAS;gBACX,iBAAM;gBACN,8BAAmB;gBAAA,iCAAoC;gBAAA,YAAiB;gBAAA,iBAAS;gBAAA,iBAAM;gBACvF,8BACE;gBAAA,kCACE;gBADuC,kGAAS,kBAAU,IAAC;gBAC3D,wBAAiC;gBACnC,iBAAS;gBACX,iBAAM;gBACR,iBAAM;;gBAZe,eAAS;gBAAT,+BAAS;gBAM2B,eAAiB;gBAAjB,2CAAiB;;mCAd1E;KAKA,IAoCC;IAnBY,oDAAoB;sDAApB,oBAAoB;kBAjBhCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,QAAQ,EAAE,2fAcX;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEF,KAAK;sBAAbA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;gBACG,GAAG;sBAAXA,UAAK;gBACG,IAAI;sBAAZA,UAAK;gBACI,OAAO;sBAAhBA,WAAM;;;;;;;;;;;;;;;ICtBT;QAUE;SAEC;QAED,4CAAe,GAAf;SAEC;4FARU,kBAAkB;+DAAlB,kBAAkB;gBANlB,iCAIZ;gBAAA,uBAA+B;gBAAA,iBAAS;;gBADjC,+BAAiB;;iCAVzB;KAKA,IAiBC;IATY,gDAAkB;sDAAlB,kBAAkB;kBAR9BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,gMAKX;oBAAC,MAAM,EAAE,EAAE;iBAAC;;;;;;;;;;;;;;;ICPb;QAWE;SAEC;QAED,iDAAe,GAAf;SAEC;sGARU,uBAAuB;oEAAvB,uBAAuB;gBAPvB,iCAKZ;gBAAA,uBAA4B;gBAAA,iBAAS;;gBAF9B,+BAAiB;;sCAVzB;KAKA,IAkBC;IATY,0DAAuB;sDAAvB,uBAAuB;kBATnCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,iBAAiB;oBAC3B,QAAQ,EAAE,4LAMX;oBAAC,MAAM,EAAE,EAAE;iBAAC;;;;;;;;;;;;;;;;;;;;;;;;;QCyBT,2BAA2D;;;QAAjC,6DAAyB;;;QANvD,sCAIE;QAAA,+CACE;QAAA,8BAAQ;QAAA,YAAgB;QAAA,iBAAS;QACjC,oFAA2D;QAC7D,iBAAkB;QACpB,iBAAa;;;QAPD,6CAA4B,+BAAA,8BAAA;QAGR,eAAuB;QAAvB,qCAAuB;QAC3C,eAAgB;QAAhB,qCAAgB;QACjB,eAAiB;QAAjB,qCAAiB;;;QAK1B,gCAKY;;;QAJV,+BAAc,+BAAA,0BAAA,oCAAA;;;;QAKhB,0CAKA;QAFc,8OAA8B;QAE5C,iBAAiB;;;QAHH,+BAAuB;QADvB,0CAAyB;;;;QAOrC,sCAYA;QAFY,kUAAmC;QAE/C,iBAAa;;;;;QAXD,wDAAsC,4CAAA,kFAAA,6JAAA,2JAAA,iKAAA,+JAAA,qBAAA,uMAAA;;;QAFpD,6BACE;QAAA,iHAYa;QACf,0BAAe;;;QAba,eAA2B;QAA3B,mDAA2B;;;QAfzD,iCACE;QAAA,gGAKY;QACZ,0GAKiB;QAEjB,sGAce;QAIjB,0BAAe;;;QAhCwD,0CAAyB;QAClF,eAAmB;QAAnB,oCAAmB;QAMd,eAAsB;QAAtB,uCAAsB;QAOxB,eAAsB;QAAtB,uCAAsB;;;;IAzCvC;QA6IE,6BAAoB,KAAY,EACZ,UAA4B,EAC5B,QAAwB;YAFxB,UAAK,GAAL,KAAK,CAAO;YACZ,eAAU,GAAV,UAAU,CAAkB;YAC5B,aAAQ,GAAR,QAAQ,CAAgB;YA7BnC,WAAM,GAAuB,EAAE,CAAC;YAChC,YAAO,GAAuB,EAAE,CAAC;YACjC,cAAS,GAAQ,SAAS,CAAC;YAE1B,iBAAY,GAAG,IAAIA,iBAAY,EAAsB,CAAC;YACtD,oBAAe,GAAG,IAAIA,iBAAY,EAAwD,CAAC;YAC3F,kBAAa,GAAG,IAAIA,iBAAY,EAAU,CAAC;YAC5C,oBAAe,GAAUC,+BAAe,CAAC,WAAW,CAAA;YACpD,sBAAiB,GAAG,IAAI,CAAC;YAKlC,oBAAe,GAAO,IAAI,CAAC;;YAElB,SAAI,GAAW,CAAC,CAAC;YACjB,gBAAW,GAAG,IAAI,CAAC;YAC5B,mBAAc,GAAwB;gBACpC,QAAQ,EAACA,+BAAe,CAAC,WAAW;aACrC,CAAC;;YAGO,QAAG,GAAW,CAAC,SAAS,CAAC;YACzB,QAAG,GAAW,UAAU,CAAC;SAOjC;QAED,yCAAW,GAAX,UAAY,OAAsB;YAAlC,iBAuCC;;YArCC,IAAG,OAAO,CAAC,eAAe,EAAC;gBACzB,IAAG,IAAI,CAAC,eAAe,KAAG,IAAI,EAAC;oBAC7B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;iBAC1B;gBACD,IAAI,CAAC,cAAc,GAAG;oBACpB,QAAQ,EAAC,IAAI,CAAC,eAAe;iBAC9B,CAAC;aACH;YAED,IAAG,OAAO,CAAC,MAAM,EAAC;gBAChB,IAAI,CAAC,iBAAiB,EAAE,CAAC;aAC1B;YAED,IAAG,OAAO,CAAC,OAAO,IAAE,IAAI,CAAC,OAAO,EAAC;;gBAE/B,IAAG,IAAI,CAAC,WAAW,EAAC;oBAChB,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAC,CAAC,EAAC,CAAC;wBAC7B,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,cAAI,OAAA,CAAC,CAAC,KAAK,EAAE,GAAA,CAAC,CAAC;qBAC7C,CAAC,CAAC;iBACJ;gBAED,UAAU,CAAC;;oBAET,KAAI,CAAC,WAAW,CAAC,OAAO,CAAC,UAAC,CAAC,EAAC,CAAC;wBAC3B,IAAI,CAAC,GAAG,KAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;wBACxB,IAAG,CAAC,CAAC,IAAI,EAAC;4BACR,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,cAAI,OAAA,CAAC,CAAC,IAAI,EAAE,GAAA,CAAC,CAAC;yBAC5C;6BAAM;4BACL,KAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,cAAI,OAAA,CAAC,CAAC,KAAK,EAAE,GAAA,CAAC,CAAC;yBAC7C;qBACF,CAAC,CAAC;iBACJ,CAAC,CAAC;aACJ;YAED,IAAG,OAAO,CAAC,MAAM,EAAC;gBAChB,UAAU,CAAC,cAAI,OAAA,KAAI,CAAC,OAAO,GAAC,KAAI,CAAC,MAAM,GAAA,CAAC,CAAC;aAC1C;SACF;QAED,6CAAe,GAAf;SACC;QAED,2CAAa,GAAb,UAAc,OAA2B;SACxC;QAED,wCAAU,GAAV,UAAW,SAAyB;YAApC,iBAqBC;YApBC,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,KAAK,KAAK,SAAS,CAAC,KAAK,GAAA,CAAC,CAAC;YAC5D,IAAI,EAAE,EAAE;gBACN,OAAO;aACR;YAED,IAAI,MAAM,GAAG,IAAIC,mBAAW,EAAE,CAAC;YAC/B,MAAM,CAAC,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC;YAE/B,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;YACzB,MAAM,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;YAE7B,IAAG,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO,EAAC;gBACjC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,SAAS,CAC1F,UAAC,IAAQ;oBACP,MAAM,CAAC,UAAU,GAAC,IAAI,CAAC;oBACvB,KAAI,CAAC,aAAa,CAAC,MAAM,EAAC,SAAS,CAAC,CAAC;iBACtC,CAAC,CAAC;aACN;iBAAM;gBACL,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;aACvC;SACF;QAEO,2CAAa,GAArB,UAAsB,MAAmB,EAAE,SAAyB;YAClE,MAAM,CAAC,MAAM,EAAE,CAAC;YAChB,IAAI,SAAS,CAAC,MAAM,KAAK,SAAS,EAAE;gBAClC,IAAG,SAAS,CAAC,MAAM,EAAC;oBAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,EAAE,IAAE,OAAA,CAAC,SAAS,CAAC,MAAM,CAAC,EAAE,CAAC,GAAA,CAAC,CAAC;iBAC7D;qBAAM;oBACL,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;iBAClB;aACF;YACD,IAAI,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC3C,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;QAED,+CAAiB,GAAjB;YACE,IAAI,EAAE,GAAC,CAAC,CAAC;YACT,KAAI,IAAI,CAAC,GAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAC,CAAC,EAAC,CAAC,IAAE,CAAC,EAAC,CAAC,EAAE,EAAC;gBACtC,IAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,KAAG,KAAK,EAAC;oBAClC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAC,EAAE,CAAC;oBACnC,EAAE,EAAE,CAAC;iBACN;aACF;SACF;QACD,4CAAc,GAAd,UAAe,CAAK;YAClB,IAAI,GAAG,GAAG,CAAC,CAAC,WAAW,EAAE,CAAC;YAC1B,GAAG,GAAG;gBACJ,IAAI,EAAC,OAAO;gBACZ,WAAW,EAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;aACvB,CAAA;YAED,IAAI,KAAK,GAAsB,EAAE,CAAC;YAClC,CAAC,CAAC,eAAe,CAAC,UAAC,GAAO,EAAC,IAAW,IAAG,OAAA,KAAK,CAAC,IAAI,CAAC,GAAC,GAAG,GAAA,CAAC,CAAC;YAE1D,OAAO;gBACL,IAAI,EAAC,SAAS;gBACd,QAAQ,EAAC,GAAG;gBACZ,UAAU,EAAC,KAAK;aACjB,CAAC;SACH;QAED,qCAAO,GAAP,UAAQ,KAAoB;YAC1B,IAAI,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACjD,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;YAC/B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAC,OAAO,EAAC,OAAO,EAAC,CAAC,CAAC;SAC9C;QAED,2CAAa,GAAb,UAAc,EAAc,EAAC,OAAW;YACtC,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC;YAC/B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAC,OAAO,EAAC,OAAO,EAAC,KAAK,EAAC,EAAE,EAAC,CAAC,CAAC;SACvD;QAED,sCAAQ,GAAR,UAAS,KAAS;YAChB,IAAI,MAAM,GAAU,KAAK,CAAC,MAAM,CAAC;YACjC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACjC;QAED,0CAAY,GAAZ,UAAa,MAAa;YACxB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;SACvB;QAED,yCAAW,GAAX;YACE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;SACnC;8FArKU,mBAAmB;gEAAnB,mBAAmB;+BAWnBC,aAAM;;;;;;;;gBA1HN,qCAeb;gBAdA,6IAAkB,kIAAA,yHAAA,8FAGJ,iBAAa,IAHT,gGAYN,oBAAgB,IAZV;gBAclB,kFAQa;gBAEb,sFAgCe;;gBAGf,sCACI;gBAAA,kBAA0D;gBAC9D,iBAAc;gBAEd,sCACI;gBAAA,qBAAwD;gBAC5D,iBAAc;gBAEd,sCACI;gBAAA,sBAAyD;gBAC7D,iBAAc;gBAEd,uCACI;gBAAA,sBAAwD;gBAC5D,iBAAc;gBAEd,uCACI;gBAAA,sBAAyD;gBAC7D,iBAAc;gBAEd,uCACI;gBAAA,sBAA2D;gBAC/D,iBAAc;gBAEd,wCACI;gBAAA,sBAA4D;gBAChE,iBAAc;gBAEd,wCACI;gBAAA,sBAA2D;gBAC/D,iBAAc;gBAEd,wCACI;gBAAA,sBAA4D;gBAChE,iBAAc;gBAEd,wCACI;gBAAA,sBAA6D;gBACjE,iBAAc;gBAEd,wCACI;gBAAA,uBAA2D;gBAC/D,iBAAc;gBAEd,wCACI;gBAAA,uBAA4D;gBAChE,iBAAc;gBAEd,iBAAU;;gBA3GV,kCAAkB,sBAAA,kBAAA,2BAAA,sBAAA,4BAAA,mCAAA,6CAAA,4CAAA,0BAAA;gBAca,eAAU;gBAAV,qCAAU;gBAUZ,eAA2B;gBAA3B,mEAA2B;;kCA1CxD;KAeA,IAuRC;IAtKY,kDAAmB;sDAAnB,mBAAmB;kBAjH/BH,cAAS;mBAAC;oBACT,QAAQ,EAAE,aAAa;oBACvB,QAAQ,EAAE,wqHA8GX;oBAAC,MAAM,EAAE,EAAE;iBAAC;2HAEF,MAAM;sBAAdA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,SAAS;sBAAjBA,UAAK;gBAEI,YAAY;sBAArBA,WAAM;gBACG,eAAe;sBAAxBA,WAAM;gBACG,aAAa;sBAAtBA,WAAM;gBACE,eAAe;sBAAvBA,UAAK;gBACG,iBAAiB;sBAAzBA,UAAK;gBAE4B,MAAM;sBAAvCA,cAAS;uBAACG,aAAM,EAAC,EAAC,MAAM,EAAC,KAAK,EAAC;gBACH,WAAW;sBAAvCH,iBAAY;uBAAC,aAAa;gBAIlB,IAAI;sBAAZA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBAMG,GAAG;sBAAXA,UAAK;gBACG,GAAG;sBAAXA,UAAK;gBACG,MAAM;sBAAdA,UAAK;;;;;;;;;;;;;;;;;IClJR;QAcE;SAEC;QAED,4CAAe,GAAf;SAEC;QAED,wCAAW,GAAX;YAAA,iBAUC;YATC,IAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,EAAC;gBAChC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;gBAC7B,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,UAAA,CAAC;oBACxC,KAAI,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAC,CAAC,CAAC,CAAC,CAAC;iBAC5C,CAAC,CAAC;aACJ;iBAAM;gBACL,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;gBACzB,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;aAC3D;SACF;4FAvBU,kBAAkB;+DAAlB,kBAAkB;gBAPlB,iCAIZ;gBADO,+FAAS,iBAAa,IAAC;gBAC9B,uBAA8B;gBAC/B,iBAAS;;gBAL0B,qCAAmB;;iCATtD;KAOA,IAiCC;IAxBY,gDAAkB;sDAAlB,kBAAkB;kBAT9BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,iPAMX;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEF,GAAG;sBAAXA,UAAK;gBACG,KAAK;sBAAbA,UAAK;gBACG,UAAU;sBAAlBA,UAAK;;;;;;;;;;;;;;;;ICZR;QAYE;SAEC;QAED,2CAAe,GAAf;SAEC;QAED,wCAAY,GAAZ;YACE,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;SACtD;0FAdU,iBAAiB;8DAAjB,iBAAiB;gBANjB,iCAIZ;gBADO,8FAAS,kBAAc,IAAC;gBAC/B,uBAAgC;gBAAA,iBAAS;;gCAb1C;KAOA,IAuBC;IAfY,8CAAiB;sDAAjB,iBAAiB;kBAR7BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,WAAW;oBACrB,QAAQ,EAAE,yMAKX;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEF,GAAG;sBAAXA,UAAK;gBACG,MAAM;sBAAdA,UAAK;;;;;;;;;;;;;;;;ICXR;QAUE;YADS,YAAO,GAAU,CAAC,CAAC;SAG3B;QAED,0CAAe,GAAf;SAEC;QAED,kCAAO,GAAP;YACE,IAAG,CAAC,IAAI,CAAC,GAAG,EAAC;gBACX,OAAO;aACR;YACD,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;SAC3D;wFAhBU,gBAAgB;6DAAhB,gBAAgB;gBALhB,iCAIZ;gBADO,6FAAS,aAAS,IAAC;gBAC1B,uBAA2B;gBAAA,iBAAS;;+BAZrC;KAMA,IAwBC;IAjBY,4CAAgB;sDAAhB,gBAAgB;kBAP5BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,UAAU;oBACpB,QAAQ,EAAE,kLAI0B;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEvC,GAAG;sBAAXA,UAAK;gBACG,OAAO;sBAAfA,UAAK;;;;;;;;;;;;;;;;ICTR;QAWE;YAFS,YAAO,GAAU,EAAE,CAAC;SAI5B;QAED,yCAAe,GAAf;SAEC;QAED,gCAAM,GAAN;YACE,IAAG,CAAC,IAAI,CAAC,GAAG,EAAC;gBACX,OAAO;aACR;YACD,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAC,CAAC,CAAC,CAAC;SACxD;sFAjBU,eAAe;4DAAf,eAAe;gBALf,iCAIZ;gBADO,4FAAS,YAAQ,IAAC;gBACzB,uBAA0B;gBAAA,iBAAS;;8BAZpC;KAMA,IAyBC;IAlBY,0CAAe;sDAAf,eAAe;kBAP3BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,+KAIyB;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEtC,GAAG;sBAAXA,UAAK;gBACG,OAAO;sBAAfA,UAAK;;;;;;;;;;;;;;;;;ICJR;QAsBE;YAdS,YAAO,GAAU,EAAE,CAAC;YACpB,eAAU,GAAe;gBAChC;oBACE,WAAW,EAAG,SAAS;oBACvB,KAAK,EAAG,UAAU;iBACnB;gBACD;oBACE,WAAW,EAAG,WAAW;oBACzB,KAAK,EAAG,WAAW;iBACpB;aACF,CAAA;YAEQ,YAAO,GAAG,mBAAmB,CAAC;SAItC;QAED,+CAAe,GAAf;SAEC;QAED,2CAAW,GAAX,UAAY,OAAsB;YAChC,IAAG,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,SAAS,EAAC;gBACpC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aACrC;SACF;QAED,+CAAe,GAAf;YAAA,iBAYC;YAXC,IAAG,CAAC,IAAI,CAAC,GAAG,EAAC;gBACX,OAAO;aACR;YAED,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,CAAC,WAAW,KAAG,KAAI,CAAC,SAAS,CAAC,WAAW,GAAA,CAAC,CAAC;YACvF,IAAI,IAAI,GAAG,CAAC,OAAO,GAAC,CAAC,IAAE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC;YAC9C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAEvC,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS;gBACP,IAAI,CAAC,SAAS,CAAC,WAAW;gBAC1B,IAAI,CAAC;SAClC;kGA1CU,qBAAqB;kEAArB,qBAAqB;gBAJrB,iCAEX;gBAFoD,kGAAS,qBAAiB,IAAC;gBAE/E,uBAAiF;gBACnF,iBAAS;;gBAHyE,wCAAsB;gBAExF,eAA8D;gBAA9D,sHAA8D;;oCAf9E;KAWA,IAiDC;IA3CY,sDAAqB;sDAArB,qBAAqB;kBANjCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,kPAGF;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEX,GAAG;sBAAXA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,UAAU;sBAAlBA,UAAK;gBAUG,SAAS;sBAAjBA,UAAK;gBACG,OAAO;sBAAfA,UAAK;;;;;;;;;;;;;;;;;ICzBR;QAeE;YALS,YAAO,GAAG,EAAE,CAAC;YACb,YAAO,GAAG,mCAAmC,CAAC;YAC9C,iBAAY,GAAG,GAAG,CAAC;YACnB,SAAI,GAAG,GAAG,CAAC;SAInB;QAED,+CAAe,GAAf;SAEC;QAED,2CAAW,GAAX,UAAY,OAAsB;YAAlC,iBAIC;YAHC,IAAG,IAAI,CAAC,GAAG,EAAC;gBACV,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,SAAS,CAAC,cAAI,OAAA,KAAI,CAAC,YAAY,EAAE,GAAA,CAAC,CAAC;aAC1D;SACF;QAED,iDAAiB,GAAjB;YACE,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,IAAI,CAAC;YAC/B,IAAG,IAAI,CAAC,YAAY,GAAC,CAAC,EAAC;gBACrB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;aACzB;YACD,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;QAEO,4CAAY,GAApB;YAAA,iBAEC;YADC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,GAAG,KAAI,CAAC,YAAY,GAAA,CAAC,CAAC;SAC7D;kGA/BU,qBAAqB;kEAArB,qBAAqB;gBANrB,iCAIb;gBAHqB,kGAAS,uBAAmB,IAAC;gBAGlD,uBAA4G;gBAC5G,iBAAS;;gBAHY,wCAAsB;gBAE7B,eAAyF;gBAAzF,qHAAyF;;oCAZvG;KAMA,IAwCC;IAhCY,sDAAqB;sDAArB,qBAAqB;kBARjCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,eAAe;oBACzB,QAAQ,EAAE,yTAKF;oBAAC,MAAM,EAAE,EAAE;iBAAC;0CAEX,GAAG;sBAAXA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACG,IAAI;sBAAZA,UAAK;;;;;;;;;;;;;;;ICdR;QAUE;SAEC;QAED,4CAAe,GAAf;SAEC;4FARU,kBAAkB;+DAAlB,kBAAkB;;gBANlB,8BACX;gBAAA,kBAAyB;gBAC3B,iBAAM;;iCATN;KAKA,IAiBC;IATY,gDAAkB;sDAAlB,kBAAkB;kBAR9BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,iFAIX,EAAC,MAAM,EAAE,CAAC,IACV,CAAC;iBAAC;;;;;;;;;;;;;;;;;;;;;ICAH;QAcE,kCAAoB,QAAmB;YAAnB,aAAQ,GAAR,QAAQ,CAAW;YAP9B,eAAU,GAAsB,EAAE,CAAC;YACnC,eAAU,GAAU,EAAE,CAAC;YACvB,gBAAW,GAAU,EAAE,CAAC;YACxB,cAAS,GAAU,CAAC,CAAC;YACrB,iBAAY,GAAU,EAAE,CAAC;YACzB,cAAS,GAAO,SAAS,CAAC;SAIlC;QAED,kDAAe,GAAf;YACE,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;QAED,8CAAW,GAAX,UAAY,OAAsB;YAChC,IAAI,CAAC,IAAI,EAAE,CAAC;SACb;QAED,uCAAI,GAAJ;YACE,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;YAEnEI,WAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YAEf,IAAG,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAC;gBACjD,OAAO;aACR;YAED,IAAM,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAA,EAAE,IAAE,OAAA,EAAE,CAAC,KAAK,GAAA,CAAC,CAAC;YACtD,IAAI,WAAkB,CAAC;YACvB,IAAG,WAAW,CAAC,KAAK,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,KAAG,WAAW,CAAC,CAAC,CAAC,GAAA,CAAC,EAAC;gBAC1C,WAAW,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC;aAC9B;YAED,IAAI,MAAM,GAAO;gBACf,MAAM,EAAE;oBACN,CAAC,EAAE,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,GAAC,EAAE,GAAC,CAAC,CAAC;oBACrC,CAAC,EAAC,IAAI,CAAC,UAAU;oBACjB,CAAC,EAAC,IAAI,CAAC,WAAW;oBAClB,CAAC,EAAC,IAAI,CAAC,YAAY;iBACpB;gBACD,KAAK,EAAC;oBACJ,UAAU,EAAE,IAAI;oBAChB,KAAK,EAAC,WAAW;iBAClB;gBACD,KAAK,EAAC,GAAG;gBACT,MAAM,EAAC,GAAG;gBACV,KAAK,EAAC,IAAI,CAAC,KAAK,IAAI,SAAS;gBAC7B,SAAS,EAAC,IAAI,CAAC,SAAS;aACzB,CAAC;YAEFA,WAAM,CAAC,IAAI,CAAE,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAA,EAAE;gBACvC,IAAM,YAAY,GAAG,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,KAAK,CAAC,CAAC,CAAC,GAAA,CAAC,CAAC,MAAM,CAAC;gBAC3D,IAAM,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,KAAK,KAAG,KAAK,MAAI,YAAY,GAAC,GAAG,CAAC;oBACvC,eAAe;oBACf,SAAS,CAAC;gBACvB,IAAM,MAAM,GAAG,WAAW,GAAC,EAAE,GAAC,OAAK,EAAE,CAAC,KAAK,MAAG,CAAC;gBAC/C,OAAO;oBACL,IAAI,EAAC,CAAC,EAAE,CAAC,KAAK,KAAG,KAAK,IAAE,KAAK,GAAC,SAAS;oBACvC,IAAI,EAAC,IAAI;oBACT,CAAC,EAAC,EAAE,CAAC,KAAK;oBACV,CAAC,EAAC,EAAE,CAAC,MAAM;oBACX,IAAI,EAAC,EAAE,CAAC,KAAK,GAAC,MAAM;iBACrB,CAAC;aACH,CAAC,EAAE,MAAM,CAAE,CAAC;SACd;wGAnEU,wBAAwB;qEAAxB,wBAAwB;gBAHxB,yBACP;;uCAfN;KAYA,IAyEC;IApEY,4DAAwB;sDAAxB,wBAAwB;kBALpCJ,cAAS;mBAAC;oBACT,QAAQ,EAAE,kBAAkB;oBAC5B,QAAQ,EAAE,qCAEX;oBAAC,MAAM,EAAE,EAAE;iBAAC;iEAEF,KAAK;sBAAbA,UAAK;gBACG,UAAU;sBAAlBA,UAAK;gBACG,UAAU;sBAAlBA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBACG,SAAS;sBAAjBA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACG,SAAS;sBAAjBA,UAAK;;;;;;;;;;;;;;;;QCLF,0BAAmC;QAAA,YAA4B;QAAA,iBAAK;;;;QAAjC,eAA4B;QAA5B,wDAA4B;;;QAE7D,4BACE;QAAA,YACF;QAAA,iBAAI;;;;QAF8C,2EAAiC;QACjF,eACF;QADE,mEACF;;;QAHF,0BACE;QAAA,qFAEI;QACN,iBAAK;;;;QAHC,eAA4B;QAA5B,uDAA4B;;;QAJpC,0BACE;QAAA,0BAAI;QAAA,8BAAQ;QAAA,YAAQ;QAAA,iBAAS;QAAA,iBAAK;QAClC,kFAAoE;QACpE,kFAIK;QACP,iBAAK;;;;QAPS,eAAQ;QAAR,6BAAQ;QACf,eAA4B;QAA5B,gEAA4B;QAC5B,eAA0B;QAA1B,8DAA0B;;;QAfxB,gCACX;QAAA,6BACE;QAAA,0BACE;QAAA,0BAAI;QAAA,8BAAQ;QAAA,wBAAQ;QAAA,iBAAS;QAAA,iBAAK;QAClC,0BAAI;QAAA,8BAAQ;QAAA,qBAAK;QAAA,iBAAS;QAAA,iBAAK;QACjC,iBAAK;QACP,iBAAQ;QACR,6BACE;QAAA,2BACE;QAAA,2BAAI;QAAA,+BAAQ;QAAA,yBAAQ;QAAA,iBAAS;QAAA,iBAAK;QAClC,2BAAI;QAAA,aAAyB;QAAA,iBAAK;QACpC,iBAAK;QACL,8EAQK;QACP,iBAAQ;QACV,iBAAQ;;;QAZE,gBAAyB;QAAzB,kDAAyB;QAEV,eAA4B;QAA5B,iEAA4B;;IAdrD;QAgCE;YAHS,WAAM,GAAsC,EAAE,CAAA;YACvD,UAAK,GAAG,MAAM,CAAC,IAAI,CAAC;SAInB;QAED,+CAAe,GAAf;SAEC;QAED,2CAAW,GAAX,UAAY,OAAsB;YAChC,IAAG,CAAC,IAAI,CAAC,MAAM,EAAC;gBACd,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;aAClB;SACF;kGAjBU,qBAAqB;kEAArB,qBAAqB;gBAzBrB,2EAsBL;;gBAtBa,kCAAa;;oCALlC;KAGA,IA6CC;IAlBY,sDAAqB;sDAArB,qBAAqB;kBA3BjCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,eAAe;oBACzB,QAAQ,EAAE,uuBAsBH,EAAC,MAAM,EAAE,CAAC,wCAEjB,CAAC;iBAAC;0CAEO,OAAO;sBAAfA,UAAK;gBACG,MAAM;sBAAdA,UAAK;;;;;;;;;;;;;;;;;QCpBE,0BAC4C;;;QAC5C,0BAC4C;;;IAVtD;QA2BE;SAEC;QAED,wDAAe,GAAf;SAEC;oHAXU,8BAA8B;2EAA9B,8BAA8B;;gBApB9B,8BACT;gBAAA,4BACE;gBADC,4IAAoC;gBACrC,8BACE;gBAAA,6BACE;gBAAA,YACA;gBAAA,iFAC4C;gBAC5C,iFAC4C;gBAC9C,iBAAK;gBACP,iBAAM;gBACR,iBAAI;gBAEJ,8BACE;gBAAA,kBAAyB;gBAC3B,iBAAM;gBACR,iBAAM;;gBAZE,eACA;gBADA,4CACA;gBAAO,eAAiB;gBAAjB,sCAAiB;gBAEjB,eAAkB;gBAAlB,uCAAkB;gBAMN,eAA2B;gBAA3B,6CAA2B;;6CApBxD;KAKA,IAkCC;IAZY,wEAA8B;sDAA9B,8BAA8B;kBAtB1CA,cAAS;mBAAC;oBACT,QAAQ,EAAE,yBAAyB;oBACnC,QAAQ,EAAE,2mBAiBX,EAAC,MAAM,EAAE,CAAC,yCAET,CAAC;iBAAC;0CAEO,WAAW;sBAAnBA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,SAAS;sBAAjBA,UAAK;;;;;;;;;;;;;;ICzBR;QAKE;SAEC;QAED,mDAAe,GAAf;SAEC;0GARU,yBAAyB;sEAAzB,yBAAyB;gBADzB,yBAAG;gBAAA,4CAA4B;gBAAA,iBAAI;;wCAPhD;KAKA,IAYC;IATY,8DAAyB;sDAAzB,yBAAyB;kBAHrCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,QAAQ,EAAE,qCAAqC;oBAAC,MAAM,EAAE,EAAE;iBAAC;;;;;;;;;;;;;;;;;;QCWvD,4BAK0B;QAAzB,6LAAS,wBAAc,IAAC;;QAAC,sBAAM;QAAA,iBAAI;;;QAHnC,0EAAkC;QADlC,mCAAkB;;;QAJvB,+BAEI;QAAA,wBACA;QAAA,2EAKoC;QACxC,iBAAO;;;QANc,eAAe;QAAf,6CAAe;;IAZtC;QAAA;YA8BW,YAAO,GAAO,EAAE,CAAC;YAChB,iBAAY,GAAG,IAAIA,iBAAY,EAAE,CAAC;SA2C7C;QApDC,6CAAW,GAAX,UAAY,OAAsB;YAChC,IAAI,CAAC,SAAS,EAAE,CAAC;SAClB;QAED,iDAAe,GAAf;SACC;QAWD,2CAAS,GAAT,UAAU,KAAU;YAClB,KAAK,CAAC,eAAe,EAAE,CAAC;YACxB,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;gBACd,OAAO;aACR;YACD,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;YACzC,IAAI,CAAC,SAAS,EAAE,CAAC;YAEjB,IAAG,IAAI,CAAC,IAAI,CAAC,OAAO,IAAE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC;gBAC7C,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACxC;iBAAM;gBACL,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACnC;SACF;QAEO,2CAAS,GAAjB;YACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI;gBACvB,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAClB,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC;YAClF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI;gBACxB,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ;gBACnB,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;YAChC,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;aACvC;iBACI,IAAI,IAAI,CAAC,SAAS,EAAE;gBACvB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;aACxC;iBACI;gBACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;aACnC;SACF;sGApDU,uBAAuB;oEAAvB,uBAAuB;gBAnBvB,4BAE0B;gBADvB,qGAAS,qBAAiB,IAAC;gBACJ,uBAAwB;gBAC7D,wBACA;gBAAA,+BAEuB;;gBAAA,YAAc;gBAAA,iBAAO;gBAC5C,0EASO;gBACT,iBAAI;;gBAfY,wCAAsB;gBAAI,eAAgB;gBAAhB,kCAAgB;gBAElD,eAAqC;gBAArC,8EAAqC;gBAEpB,eAAc;gBAAd,oCAAc;gBAC9B,eAAkB;gBAAlB,uCAAkB;;sCAf3B;KAMA,IA0EC;IArDY,0DAAuB;sDAAvB,uBAAuB;kBArBnCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,kBAAkB;oBAC5B,QAAQ,EAAE,wkBAkBX;oBAAC,MAAM,EAAE,EAAE;iBAAC;oBASF,IAAI;sBAAZA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACI,YAAY;sBAArBA,WAAM;;;;;;;;;;;;;;;;;;QCvBD,sCAEgC;QADpB,iPAAsC;QAClB,iBAAc;;;;QAFD,2BAAU,eAAA,2BAAA;;;QADzD,6BACE;QAAA,qGAE8C;QAChD,iBAAK;;;QAHwB,eAAgB;QAAhB,8CAAgB;;;;QALjD,2BACE;QAAA,0BAAK;QAAA,2CAEyD;QAAvC,oOAAsC;QAAC,iBAAmB;QAC/E,8EAIK;QACP,iBAAK;QACP,iBAAM;;;QATmB,eAAa;QAAb,kCAAa,2BAAA;QAG7B,eAAkC;QAAlC,mEAAkC;;;;QAajC,sCAEoB;QADpB,oPAAsC;QAClB,iBAAc;;;;QAFW,4BAAU,eAAA,4BAAA;;;QAD3D,6BACI;QAAA,qGAEkC;QACtC,iBAAK;;;QAH0B,eAAgB;QAAhB,+CAAgB;;;;QALrD,2BACE;QAAA,6BACE;QAAA,0BAAI;QAAA,2CACqC;QAAvC,sOAAsC;QAAC,iBAAmB;QAC1D,8EAIK;QACP,iBAAK;QACP,iBAAK;QACP,iBAAM;;;QAToB,eAAa;QAAb,kCAAa,2BAAA;QAE5B,eAAkC;QAAlC,mEAAkC;;;;QAWrC,sCAEoB;QADpB,oPAAsC;QAClB,iBAAc;;;;QAFW,4BAAU,eAAA,4BAAA;;;QAD3D,6BACI;QAAA,qGAEkC;QACtC,iBAAK;;;QAH0B,eAAgB;QAAhB,+CAAgB;;;QAFnD,2BACI;QAAA,8EAIK;QACP,iBAAM;;;QALC,eAAkC;QAAlC,mEAAkC;;;QA5BhC,8BAEX;QAAA,0EAUM;QAEN,0EAWM;QAEN,0EAMQ;QAEV,iBAAM;;;QAjCE,eAAW;QAAX,mCAAW;QAYX,eAAqB;QAArB,sDAAqB;QAarB,eAAsB;QAAtB,uDAAsB;;IA7B9B;QA+DE;YAXS,YAAO,GAAY,IAAI,CAAC;YAGxB,kBAAa,GAAG,mBAAmB,CAAC;YACpC,iBAAY,GAAG,kBAAkB,CAAC;YAClC,aAAQ,GAAG,aAAa,CAAC;YAExB,iBAAY,GAAG,IAAIA,iBAAY,EAAE,CAAC;YAEnC,YAAO,GAAO,EAAE,CAAC;SAIzB;QAED,6CAAe,GAAf;SAEC;QAED,yCAAW,GAAX,UAAY,OAAsB;YAChC,IAAG,OAAO,CAAC,OAAO,EAAC;gBACjB,OAAO;aACR;YAED,IAAI,CAAC,OAAO,GAAG;gBACb,aAAa,EAAC,IAAI,CAAC,aAAa;gBAChC,YAAY,EAAC,IAAI,CAAC,YAAY;gBAC9B,QAAQ,EAAC,IAAI,CAAC,QAAQ;aACvB,CAAC;SACH;QAED,2CAAa,GAAb,UAAc,IAAc;YAC1B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC9B;8FAnCU,mBAAmB;gEAAnB,mBAAmB;gBAhDnB,oEAmCP;;gBAnCa,mDAAwB;6GAgD9B,mBAAmB;kCAvDhC;KAKA,IAuFC;IArCY,kDAAmB;sDAAnB,mBAAmB;kBAlD/BA,cAAS;mBAAC;oBACT,QAAQ,EAAE,aAAa;oBACvB,QAAQ,EAAE,65CAoCX,EAAC,MAAM,EAAE,CAAC,qIAWT,CAAC;iBAAC;0CAEO,IAAI;sBAAZA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,KAAK;sBAAbA,UAAK;gBAEG,aAAa;sBAArBA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;gBAEI,YAAY;sBAArBA,WAAM;gBAEE,OAAO;sBAAfA,UAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC3CI,uBAAgE;;;QAChE,uBAAkE;;IAP9E;QA2CE,0BAAY,aAAgC,EAAU,QAAwB;YAAxB,aAAQ,GAAR,QAAQ,CAAgB;YAdrE,qBAAgB,GAAG,IAAI,CAAC;YACxB,kBAAa,GAAG,KAAK,CAAC;YACtB,iBAAY,GAAwB,EAAE,CAAC;YACtC,kBAAa,GAAiC,IAAIA,iBAAY,EAAkB,CAAC;YAClF,kBAAa,GAAG,mBAAmB,CAAC;YACpC,iBAAY,GAAG,kBAAkB,CAAC;YAClC,aAAQ,GAAG,aAAa,CAAC;YAElC,WAAM,GAAiB,EAAE,CAAC;YAC1B,SAAI,GAAc,EAAE,KAAK,EAAE,mBAAmB,EAAE,CAAC;YACjD,eAAU,GAAG,EAAE,CAAC;YAKd,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;SACpC;QAED,0CAAe,GAAf;YACE,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;SACF;QAED,sCAAW,GAAX,UAAY,OAAsB;YAChC,IAAI,OAAO,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE;gBACnC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;gBACrB,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,IAAI,CAAC,eAAe,CAAC,EAAE,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACpC;SACF;QAED,oCAAS,GAAT;YAAA,iBAkHC;YAjHC,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC;YACvB,IAAI,IAAI,GAAc;gBACpB,KAAK,EAAE,GAAG,CAAC,IAAI;gBACf,QAAQ,EAAE,IAAI;gBACd,OAAO,EAAE,IAAI;aAKd,CAAA;YAED,IAAI,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,IAAI,IAAE,CAAC,CAAC,CAAC,IAAI,GAAA,CAAC,GAAA,CAAC,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,OAAA,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAA,EAAE,EAAE,CAAC,CAAC;YAClH,IAAI,cAAc,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,IAAI,IAAE,CAAC,CAAC,CAAC,IAAI,GAAA,CAAC,CAAC;YAE7D,IAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,UAAA,EAAE;gBAC1C,OAAO;oBACL,IAAI,EAAC,EAAE,CAAC,IAAI;oBACZ,OAAO,EAAC,EAAE,CAAC,OAAO;oBAClB,MAAM,EAAC,UAAC,IAAe,IAAK,OAAA,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAC,EAAE,CAAC,MAAM,CAAC,GAAA;iBACjE,CAAC;aACH,CAAC,CAAC;YAEH,IAAM,WAAW,GAAG,UAAC,CAAQ;gBAC3B,IAAI,MAAM,GAAa;oBACrB,KAAK,EAAE,CAAC,CAAC,IAAI;oBACb,IAAI,EAAE,CAAC;oBACP,OAAO,EAAE,IAAI;oBACb,OAAO,EAAE,WAAW;iBACrB,CAAC;gBAEF,IAAM,GAAG,GAAG,IAAIE,mBAAW,EAAE,CAAC;gBAC9B,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;gBACd,GAAG,CAAC,MAAM,EAAE,CAAC;gBAEb,IAAG,CAAC,CAAC,WAAW,EAAC;oBACf,MAAM,CAAC,OAAO,GAAGG,OAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;iBACpC;qBAAM;oBACL,MAAM,CAAC,OAAO,GAAG,KAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAClDC,aAAG,CAAC,UAAA,IAAI,IAAE,OAAA,IAAI,CAAC,CAAC,CAAC,gBAAgB,IAAE,WAAW,CAAC,GAAA,CAAC,CACjD,CAAC;iBACH;gBACD,OAAO,MAAM,CAAC;aACf,CAAA;YAED,SAAS,WAAW,CAAC,CAAQ;gBAC3B,OAAO;oBACL,KAAK,EAAE,CAAC,CAAC,IAAI;oBACb,QAAQ,EAAE,KAAK;oBACf,OAAO,EAAE,IAAI;oBACb,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,CAAC,IAAI,IAAE,CAAC,CAAC,CAAC,IAAI,GAAA,CAAC;yBAC7C,MAAM,CAAC,UAAA,CAAC,IAAE,OAAA,IAAI,CAAC,gBAAgB,IAAE,CAAC,CAAC,CAAC,WAAW,GAAA,CAAC;yBAChD,GAAG,CAAC,WAAW,CAAC;iBACpB,CAAC;aACH;YAED,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,CAAC,IAAI,IAAE,CAAC,CAAC,CAAC,IAAI,GAAA,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAE1E,SAAS,UAAU,CAAC,IAAY;;gBAC9B,IAAI,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBACjC,IAAI,MAAM,GAAc,IAAI,CAAC;gBAC7B,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;;oBAEf,KAAsB,IAAA,eAAA,SAAA,UAAU,CAAA,sCAAA,8DAAE;wBAA7B,IAAI,SAAS,uBAAA;wBAChB,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;wBACjC,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;wBACrB,KAAK,GAAG,CAAC,CAAC,CAAC;wBACX,IAAG,KAAK,CAAC,MAAM,GAAC,CAAC,EAAC;4BAChB,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;yBACnB;wBAED,IAAI,KAAK,GAAG,KAAK,CAAC;;4BAClB,KAAc,IAAA,oBAAA,SAAA,MAAM,CAAC,QAAQ,CAAA,CAAA,gBAAA,4BAAE;gCAA1B,IAAI,CAAC,WAAA;gCACR,IAAI,CAAC,CAAC,KAAK,KAAK,SAAS,EAAE;oCACzB,MAAM,GAAG,CAAC,CAAC;oCACX,KAAK,GAAG,IAAI,CAAC;oCACb,MAAM;iCACP;6BACF;;;;;;;;;wBAED,IAAI,CAAC,KAAK,EAAE;4BACV,IAAI,OAAO,GAAc;gCACvB,KAAK,EAAE,SAAS;gCAChB,QAAQ,EAAE,KAAK;gCACf,OAAO,EAAE,IAAI;gCACb,QAAQ,EAAE,EAAE;6BACb,CAAC;4BACF,QAAQ,CAAC,MAAM,EAAC,OAAO,EAAC,KAAK,CAAC,CAAC;4BAC/B,MAAM,GAAG,OAAO,CAAC;yBAClB;qBACF;;;;;;;;;gBACD,OAAO,CAAC,MAAM,EAAC,KAAK,CAAC,CAAC;aACvB;YAED,SAAS,QAAQ,CAAC,MAAgB,EAAC,KAAe,EAAC,CAAQ;gBACzD,IAAG,CAAC,GAAC,CAAC,EAAC;oBACL,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBAC7B;qBAAM;oBACL,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,EAAC,KAAK,CAAC,CAAC;iBACnC;aACF;YAED,cAAc,CAAC,OAAO,CAAC,UAAA,CAAC;gBAClB,IAAA,KAAA,OAAiB,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAA,EAAlC,MAAM,QAAA,EAAC,KAAK,QAAsB,CAAC;gBACxC,QAAQ,CAAC,MAAM,EAAC,WAAW,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC,CAAC;aACvC,CAAC,CAAC;YAEH,cAAc,CAAC,OAAO,CAAC,UAAA,CAAC;gBAClB,IAAA,KAAA,OAAiB,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,IAAA,EAAlC,MAAM,QAAA,EAAC,KAAK,QAAsB,CAAC;gBACxC,QAAQ,CAAC,MAAM,EAAC,WAAW,CAAC,CAAC,CAAC,EAAC,KAAK,CAAC,CAAC;aACvC,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;SAClB;QAED,qCAAU,GAAV,UAAW,CAAQ,EAAC,MAAa;YAC/B,IAAI,SAAS,GAAmB;gBAC9B,KAAK,EAAE,CAAC;gBACR,MAAM,EAAE,MAAM;aACf,CAAC;YACF,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACpC;QAED,uCAAY,GAAZ,UAAa,CAAY;YACvB,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE;gBACX,OAAO;aACR;YAED,IAAI,KAAK,GAAU,CAAC,CAAC,IAAI,CAAC;YAC1B,IAAI,CAAC,UAAU,CAAC,KAAK,EAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC3C;QAED,uCAAY,GAAZ,UAAa,MAAc;YACzB,IAAI,CAAC,eAAe,CAAC,MAAM,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACxC;QAED,0CAAe,GAAf,UAAgB,MAAc,EAAC,IAAc;YAC3C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;YAElB,IAAG,IAAI,CAAC,IAAI,KAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAE,CAAC,CAAC,EAAC;gBAC3C,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC;gBAC5B,OAAO,IAAI,CAAC;aACb;YAED,IAAG,IAAI,CAAC,QAAQ,EAAC;gBACf,IAAI,WAAW,GAAG,KAAK,CAAC;gBACxB,KAAI,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC;oBACrC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,WAAW,CAAC;iBAC5E;gBACD,IAAG,WAAW,EAAC;oBACb,IAAI,CAAC,KAAK,GAAG,cAAc,CAAC;iBAC7B;gBACD,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,IAAE,EAAE,IAAI,QAAQ,CAAC;gBACzC,OAAO,WAAW,CAAC;aACpB;YAED,OAAO,KAAK,CAAC;SACd;wFAhMU,gBAAgB;6DAAhB,gBAAgB;gBAzBhB,8BACX;gBAAA,+BACU;gBAAA,iCAEA;gBADE,8GAAsB,EAAE,IAAC;gBAC3B,6DAAgE;gBAChE,6DAAkE;gBAClE,iBAAS;gBACnB,iBAAO;gBACP,mCAEF;gBADE,6IAAwB;gBADxB,iBAEF;gBAAA,iBAAM;gBAEN,sCAOA;gBADE,sHAAgB,wBAAoB,IAAC;gBACvC,iBAAc;;gBAjBgC,eAAwB;gBAAxB,0CAAwB;gBAEtD,eAAgB;gBAAhB,qCAAgB;gBAChB,eAAiB;gBAAjB,sCAAiB;gBAI/B,eAAwB;gBAAxB,wCAAwB;gBAIxB,eAAwD;gBAAxD,6EAAwD,kBAAA,0BAAA,oCAAA,kCAAA;;+BAhC1D;KAiBA,IA4NC;IAjMY,4CAAgB;sDAAhB,gBAAgB;kBA3B5BN,cAAS;mBAAC;oBACT,QAAQ,EAAE,SAAS;oBACnB,QAAQ,EAAE,mxBAoBX,EAAC,MAAM,EAAE,CAAC,sCAIV,CAAC;iBAAE;sGAEO,OAAO;sBAAfA,UAAK;gBACG,gBAAgB;sBAAxBA,UAAK;gBACG,aAAa;sBAArBA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACI,aAAa;sBAAtBA,WAAM;gBACE,aAAa;sBAArBA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;;;;;;;;;;;;;;;;;;;;;;QCzCN,8BACE;QAAA,8BACI;QAAA,8BACE;QAAA,mCAIA;QAHiB,oNAAwB,iMAAA;QADzC,iBAIA;QAAA,8BACE;QAD6B,0JAAS,YAAU,IAAC;QACjD,uBAA8B;QAChC,iBAAM;QACR,iBAAM;QACR,iBAAM;QAQV,iBAAM;;;QAfmB,eAAwB;QAAxB,2CAAwB,iCAAA,iCAAA;;;;QAkB/C,wCAE8C;QAAhC,4NAA+B;QAAC,iBAAe;;;QAF5B,uCAAkB,mBAAA,gBAAA,yBAAA;;;;QAGnD,wCAC8C;QAAhC,4NAA+B;QAAC,iBAAe;;;QAD5B,uCAAkB,qBAAA,kBAAA;;;;QAEnD,wCAC8C;QAAhC,4NAA+B;QAAC,iBAAe;;;QAD5B,uCAAkB,oBAAA,iBAAA;;;QANrD,2BACE;QAAA,gGAE6D;QAC7D,gGAC6D;QAC7D,gGAC6D;QAC/D,iBAAM;;;QAPW,eAAc;QAAd,sCAAc;QAGd,eAAgB;QAAhB,wCAAgB;QAEhB,eAAe;QAAf,uCAAe;;IAlClC,IAAM,oBAAoB,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC;IAIzC;QA0DE,gCAAoB,SAA2B;YAA3B,cAAS,GAAT,SAAS,CAAkB;YArBrC,eAAU,GAAG,IAAIA,iBAAY,EAAE,CAAC;YAIjC,UAAK,GAAuB,QAAQ,CAAC;YACrC,aAAQ,GAAG,CAAC,CAAC;YACb,kBAAa,GAAU,IAAI,CAAC;YAErC,SAAI,GAAG;gBACL,GAAG,EAAC,IAAI;gBACR,KAAK,EAAC,IAAI;gBACV,IAAI,EAAC,IAAI;aACV,CAAC;YAMF,UAAK,GAAS,KAAK,CAAC;YACpB,UAAK,GAAS,KAAK,CAAC;SAInB;QAED,gDAAe,GAAf;SAEC;QAED,4CAAW,GAAX,UAAY,OAAW;YACrB,IAAG,OAAO,CAAC,OAAO,EAAC;gBACjB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC/D;YAED,IAAG,OAAO,CAAC,OAAO,EAAC;gBACjB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aAC/D;YAED,IAAG,OAAO,CAAC,IAAI,EAAC;gBACd,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACzD;YAED,IAAG,OAAO,CAAC,QAAQ,EAAC;gBAClB,IAAI,CAAC,oBAAoB,EAAE,CAAC;aAC7B;YACD,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,kDAAiB,GAAjB;YACE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAC,IAAI,CAAC,UAAU,CAAC,KAAK,GAAC,CAAC,EAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC;;;;YAIjG,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjC;QAED,qDAAoB,GAApB;YACE,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACxD,IAAG,IAAI,CAAC,QAAQ,KAAG,OAAO,EAAC;gBACzB,OAAO;aACR;YACD,IAAI,CAAC,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;YAEtB,IAAG,IAAI,CAAC,QAAQ,KAAG,QAAQ,EAAE;gBAC3B,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;aACzB;SACF;QAED,qCAAI,GAAJ,UAAK,CAAQ;YACX,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,IAAE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACjC;QAED,8CAAa,GAAb;YACE,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,4CAAW,GAAX;YACE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3E,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAC,IAAI,CAAC,aAAa,CAAC,CAAC;SAC5E;;QAGD,+CAAc,GAAd;YACE,IAAG,CAAC,IAAI,CAAC,aAAa,EAAC;gBACrB,OAAO;aACR;YAED,IAAI,aAAa,GAAGE,4BAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,EAAC;gBACtE,IAAI,EAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;gBAC5B,KAAK,EAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,GAAC,CAAC;gBAC5B,IAAI,EAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;aACzB,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,CAAC,GAAA,CAAC,CAAC;YAEzB,IAAI,UAAU,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,EAAC,aAAa,CAAC,CAAC,CAAC,GAAC,CAAC,EAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1F,OAAO,CAAC,GAAG,CAAC,YAAY,EAAC,UAAU,CAAC,CAAC;YACrC,OAAO,CAAC,GAAG,CAAC,aAAa,EAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrC,IAAI,QAAQ,GAAG,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC;YAEpD,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,UAAU,CAAC,OAAO,EAAE,IAAE,QAAQ,CAAC;YACjE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAC,QAAQ,CAAC,CAAC;YACvE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzD;oGA5GU,sBAAsB;mEAAtB,sBAAsB;gBAjCtB,8BACX;gBAAA,uEAmBM;gBAEN,uEAQM;gBACR,iBAAM;;gBA9BE,eAAsB;gBAAtB,6CAAsB;gBAqBtB,eAAsB;gBAAtB,6CAAsB;;qCAhC9B;KAQA,IAiJC;IA9GY,wDAAsB;sDAAtB,sBAAsB;kBAnClCF,cAAS;mBAAC;oBACT,QAAQ,EAAE,gBAAgB;oBAC1B,QAAQ,EAAE,8+CAgCX;oBAAC,MAAM,EAAE,EAAE;iBAAC;uEAEF,IAAI;sBAAZA,UAAK;gBACI,UAAU;sBAAnBA,WAAM;gBACE,QAAQ;sBAAhBA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,OAAO;sBAAfA,UAAK;gBACG,KAAK;sBAAbA,UAAK;gBACG,QAAQ;sBAAhBA,UAAK;gBACG,aAAa;sBAArBA,UAAK;;;;;;;;;;;;;;;;;;;;;;QCvCJ,+BAKF;QAAA,uBAAM;QAAA,uBAAiC;QACvC,iBAAO;;;QALL,uDAAkC,sCAAA;;;QAM9B,4BACJ;QAAA,6BAAO;QAAA,4BAIL;QAAA,uBAA8B;QAChC,iBAAI;QAAA,iBAAQ;QACd,iBAAO;;;QALK,eAAsC;QAAtC,6EAAsC,+BAAA;;;QAShD,4BAAmD;QAAA,yBAAS;QAAA,iBAAO;;;QACnE,4BAAoD;QAAA,YAAyD;QAAA,iBAAO;;;QAAhE,eAAyD;QAAzD,yFAAyD;;;QAE3G,iCAA8E;QAAA,YAAyB;QAAA,iBAAS;;;;QAAhD,+BAAa;QAAC,eAAyB;QAAzB,mDAAyB;;;;QAJ3G,2BACE;QAAA,iFAAmE;QACnE,iFAAoH;QACpH,iCACE;QADM,yOAAuC,qNAAA;QAC7C,qFAAgH;QAClH,iBAAS;QACX,iBAAM;;;QALG,eAA0C;QAA1C,kEAA0C;QAC1C,eAA2C;QAA3C,mEAA2C;QAC1C,eAAuC;QAAvC,0DAAuC;QACvB,eAA6B;QAA7B,yDAA6B;;;QAGvD,2BACE;QAAA,YACF;QAAA,iBAAM;;;QADJ,eACF;QADE,6FACF;;;;QAEA,2BACE;QAAA,qBACA;QAAA,0CAMsC;QANtB,oOAA6B,0MAAA;QAMP,iBAAiB;QACzD,iBAAM;;;QAPY,eAA6B;QAA7B,gDAA6B,yCAAA,wDAAA,uDAAA,6CAAA,2CAAA;;;;QAS/C,2BACE;QAAA,qBACA;QAAA,kCAAgE;QAAzB,gMAAwB;QAAC,8BAAc;QAAA,iBAAS;QACzF,iBAAM;;;QAYA,iCAAqE;QAAA,YAAa;QAAA,iBAAS;;;QAA5C,uCAAqB;QAAC,eAAa;QAAb,mCAAa;;;;QAHtF,2BACE;QAAA,YACA;QAAA,iCACE;QADM,oQAAuB,4OAAA;QAC7B,4FAA2F;QAC7F,iBAAS;QACX,iBAAM;;;;QAJJ,eACA;QADA,wCACA;QAAQ,eAAuB;QAAvB,+CAAuB;QACL,eAAqB;QAArB,wDAAqB;;;QAJnD,2BACE;QAAA,iFAKM;QACR,iBAAM;;;QANiB,eAAyB;QAAzB,8DAAyB;;;QAW5C,iCAA6D;QAAA,YAAW;QAAA,iBAAS;;;QAAxC,qCAAmB;QAAC,eAAW;QAAX,iCAAW;;;;QAH5E,2BACE;QAAA,2BACA;QAAA,iCACE;QADM,iOAA8B,qMAAA;QACpC,sFAAiF;QACnF,iBAAS;QACX,iBAAM;;;QAHI,eAA8B;QAA9B,iDAA8B;QACd,eAAiB;QAAjB,+CAAiB;;IAlE7C;QA4FE,kCAAoB,qBAA4C;YAA5C,0BAAqB,GAArB,qBAAqB,CAAuB;YAZhE,YAAO,GAAG,MAAM,CAAC,IAAI,CAAC;YAGZ,oBAAe,GAAG,IAAIA,iBAAY,EAAE,CAAC;YACtC,qBAAgB,GAAW,OAAO,CAAC;YAC5C,kBAAa,GAAgB,IAAI,CAAC;YAClC,SAAI,GAA8B,EAAE,CAAA;YACpC,mBAAc,GAAoB,EAAE,CAAC;SAOpC;QAED,sBAAI,iDAAW;iBAAf;gBACE,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,EAAE;oBACtE,OAAO,IAAI,CAAC;iBACb;gBACD,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,IAAI,CAAC,CAAC,CAAC;aAC3E;;;WAAA;QAED,kDAAe,GAAf;YAAA,iBAmBC;;;;;;;;;YAVC,IAAI,IAAI,CAAC,GAAG,EAAE;gBACZ,IAAI,CAAC,2BAA2B;oBAC9B,IAAI,CAAC,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,UAAC,GAA8D,IAAK,OAAA,KAAI,CAAC,eAAe,CAAC,GAAG,CAAC,GAAA,CAAC,CAAC;aACrI;YAED,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,UAAU,CAAC;oBACT,KAAI,CAAC,QAAQ,EAAE,CAAC;iBACjB,CAAC,CAAC;aACJ;SACF;QAED,8CAAW,GAAX;YACE,IAAI,IAAI,CAAC,2BAA2B,EAAE;gBACpC,IAAI,CAAC,2BAA2B,CAAC,WAAW,EAAE,CAAC;aAChD;SACF;QAED,kDAAe,GAAf,UAAgB,GAA8D;YAC5E,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBACpD,OAAO;aACR;YACD,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC,OAAO,CAAC;;YAEnC,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;QAED,sDAAmB,GAAnB,UAAoB,GAAW;YAC7B,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,GAAG,GAAG,CAAC;;YAErC,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC9B,IAAI,CAAC,qBAAqB,EAAE,CAAC;gBAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;aACxB;YAED,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;SAClB;QAED,8CAAW,GAAX;YACE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YACpB,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACvC;QAED,yCAAM,GAAN,UAAO,KAAU;YAAjB,iBAMC;YALC,IAAI,CAAC,WAAW,EAAE,CAAC;YAEnB,UAAU,CAAC;gBACT,KAAI,CAAC,QAAQ,EAAE,CAAC;aACjB,CAAC,CAAC;SACJ;QAED,8CAAW,GAAX,UAAY,IAAsD;YAChE,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO,IAAI,CAAC;aACb;YAED,IAAI,MAAM,GAAgB,EAAE,CAAC;YAE7B,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,UAAA,CAAC;gBACzB,IAAI,MAAM,GAAkC,IAAI,CAAC,CAAC,CAAC,CAAC;gBACpD,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,UAAA,CAAC;oBACtB,IAAI,MAAM,GAAkB,CAAC,CAAC;oBAC9B,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,EAAE;wBAChC,OAAO,MAAM,CAAC;qBACf;oBACD,IAAI,SAAS,GAAW,CAAC,CAAC;oBAC1B,OAAO;wBACL,KAAK,EAAE,SAAS;wBAChB,KAAK,EAAE,SAAS;qBACjB,CAAC;iBACH,CAAC,CAAA;aACH,CAAC,CAAA;YACF,OAAO,MAAM,CAAC;SACf;QAED,2CAAQ,GAAR;YACE,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBAC9B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;aACxE;iBAAM;gBACL,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,iBAAiB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;aAClF;YACD,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;QAED,6CAAU,GAAV,UAAW,CAAS;YAClB,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;SACnB;QAED,iDAAc,GAAd;YAAA,iBAYC;YAXC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;gBACvB,OAAO;aACR;YAED,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;gBACzC,IAAI,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,SAAS,EAAE;oBAChC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;iBACnD;aACF,CAAC,CAAC;YAEH,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;QAED,+CAAY,GAAZ;YACE,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;gBACb,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;gBACvB,OAAO;aACR;YAED,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;YACpC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;YACpC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,IAAI,EAAE,CAAC;SAC7C;QAED,iDAAc,GAAd;YACE,OAAO;gBACL,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,SAAS;gBACnC,QAAQ,EAAE,IAAI,CAAC,gBAAgB;gBAC/B,OAAO,EAAE,IAAI,CAAC,eAAe;gBAC7B,IAAI,EAAE,IAAI,CAAC,IAAI;aAChB,CAAC;SACH;QAED,iDAAc,GAAd;YACE,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC;YAE/D,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE;gBACpD,OAAO;aACR;YAED,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;QAED,kDAAe,GAAf;YAAA,iBAuBC;YAtBC,IAAI,GAAG,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;YAChC,IAAI,CAAC,qBAAqB,CAAC,mBAAmB,CAC5C,GAAG,CAAC,CAAC,SAAS,CAAC,UAAA,SAAS;gBACtB,KAAI,CAAC,cAAc,GAAG,SAAS,CAAC,KAAK,EAAE,CAAC;gBACxC,IAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,EAAC;oBACpC,KAAI,CAAC,cAAc,GAAG,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,UAAA,CAAC;wBAChD,OAAO,CAAC,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,UAAA,OAAO;4BACrD,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;yBACjC,CAAC,CAAC;qBACJ,CAAC,CAAC;iBACJ;gBACD,IAAG,CAAC,KAAI,CAAC,cAAc,CAAC,MAAM,EAAC;oBAC7B,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;iBAC9B;qBAAM,IAAI,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,CAAC,KAAK,KAAG,KAAI,CAAC,gBAAgB,GAAA,CAAC,GAAG,CAAC,EAAE;oBAChF,IAAI,KAAI,CAAC,cAAc,CAAC,SAAS,CAAC,UAAA,CAAC,IAAE,OAAA,CAAC,CAAC,KAAK,KAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,GAAA,CAAC,IAAI,CAAC,EAAE;wBAC/F,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,CAAC;qBACpE;yBAAM;wBACL,KAAI,CAAC,gBAAgB,GAAG,KAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;qBACtD;iBACF;gBACD,KAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B,CAAC,CAAC;SACN;QAED,wDAAqB,GAArB;YACE,IAAI,CAAC,qBAAqB,CAAC,cAAc,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;SAClE;wGAnMU,wBAAwB;qEAAxB,wBAAwB;gBA7ExB,8BACX;gBAAA,yBAAG;gBAAA,8BAAQ;gBAAA,YAAgB;gBAAA,iBAAS;gBAClC,2EAMK;gBACP,uBAAM;gBAAA,2EAOC;gBACP,iBAAI;gBAEJ,yEAMM;gBACN,yEAEM;gBAEN,yEASM;gBAEN,2EAGM;gBAQN,2EAOM;gBAEN,2EAKM;gBASR,iBAAM;;gBA1EO,eAAgB;gBAAhB,gEAAgB;gBAClB,eAAyB;gBAAzB,8CAAyB;gBAOrB,eAAmC;gBAAnC,wDAAmC;gBAU1C,eAAwC;gBAAxC,2FAAwC;gBAOxC,eAA0C;gBAA1C,6FAA0C;gBAI1C,eAAuC;gBAAvC,kEAAuC;gBAWvC,eAAqC;gBAArC,0DAAqC;gBAWrC,eAAmB;gBAAnB,wCAAmB;gBASnB,eAA4B;gBAA5B,iFAA4B;;uCAvEpC;KAQA,IAmRC;IApMY,4DAAwB;sDAAxB,wBAAwB;kBA/EpCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,kBAAkB;oBAC5B,QAAQ,EAAE,2uFA2EL;oBAAE,MAAM,EAAE,EAAE;iBAClB;4EAGU,KAAK;sBAAbA,UAAK;gBACG,GAAG;sBAAXA,UAAK;gBACI,eAAe;sBAAxBA,WAAM;gBACE,gBAAgB;sBAAxBA,UAAK;;;;;;;;;;;;;;;;;;;;;;;QClFN,8BAAwD;QACtD,8BACE;QACA,4BAAqE;QAA5B,6KAAoB,KAAK,KAAE;QAAC,iBAAI;QACzE,4BAAwE;QAA3B,6KAAoB,IAAI,KAAE;QAAC,iBAAI;QAC9E,iBAAM;QACN,qBACF;QAAA,iBAAM;;;QAOE,2BACE;QAAA,iCAQa;QACf,iBAAM;;;QATQ,eAAiB;QAAjB,kCAAiB,4BAAA,gCAAA,kFAAA,wNAAA,6NAAA,6IAAA,2FAAA;;;QAFjC,2BACE;QAAA,wFAUM;QACR,iBAAM;;;QAXE,eAAiD;QAAjD,iHAAiD;;;;QAazD,2BACE;QAAA,4CAGA;QADkB,2PAAgD;QAClE,iBAAmB;QACrB,iBAAM;;;;QAJc,eAAW;QAAX,4BAAW,mBAAA;;;QAS3B,wBAA6D;;;QAAA,qBAC7D;;;;QAAA,6BAEkC;QAA/B,2OAAuB,KAAK,KAAE;QAAC,iBAAI;;;QAAA,qBACtC;;;;QAAA,6BAEiC;QAA9B,4OAAuB,IAAI,KAAE;QAAC,iBAAI;;;QAAA,qBACrC;;;;QAAA,6BAEyB;QAAvB,yOAAsB;QAAC,iBAAI;;;QAAA,qBAC7B;;;;QAAA,6BAEsB;QAApB,sOAAmB;QAAC,iBAAI;;;QAAA,qBAC1B;;;;QAAA,6BAEwB;QAAtB,wOAAqB;QAAC,iBAAI;;;QAAA,qBAC5B;;;;QAAA,6BAE4B;QAA1B,4OAAyB;QAAC,iBAAI;;;QAAA,qBAChC;;;;QAAA,6BAG2B;QAAzB,2OAAwB;QAAC,iBAAI;;;QAjDvC,8BAEE;QAAA,8BACE;QAAA,kFAYM;QAEN,kFAKM;QACR,iBAAM;QACN,+BACI;QAAA,2BACE;QACA,+EAA6D;QAAA,gFAC7D;QAAA,+EAEsC;QAAA,gFACtC;QAAA,iFAEqC;QAAA,kFACrC;QAAA,iFAE6B;QAAA,kFAC7B;QAAA,iFAE0B;QAAA,kFAC1B;QAAA,iFAE4B;QAAA,kFAC5B;QAAA,iFAEgC;QAAA,kFAChC;QAAA,iFAG+B;QACjC,iBAAM;QACR,iBAAM;QACR,iBAAM;;;;QAjDE,eAAmC;QAAnC,gEAAmC;QAcnC,eAAqC;QAArC,kEAAqC;QAUnC,eAAkB;QAAlB,0CAAkB;QAA4C,eAAkB;QAAlB,0CAAkB;QAChF,eAAiB;QAAjB,yCAAiB;QAEsB,eAAiB;QAAjB,yCAAiB;QACxD,eAAiB;QAAjB,yCAAiB;QAEqB,eAAiB;QAAjB,yCAAiB;QACvD,eAAkB;QAAlB,0CAAkB;QAEY,eAAkB;QAAlB,0CAAkB;QAChD,eAAkB;QAAlB,0CAAkB;QAES,eAAkB;QAAlB,0CAAkB;QAC7C,eAAkB;QAAlB,0CAAkB;QAEW,eAAkB;QAAlB,0CAAkB;QAC/C,eAAkB;QAAlB,0CAAkB;QAEe,eAAkB;QAAlB,0CAAkB;QACnD,eAAiB;QAAjB,yCAAiB;;;QA/C/B,2BACE;QAAA,8EAoDQ;QACV,iBAAM;;;QArDe,eAAW;QAAX,uCAAW;;IAblC;QAwFE,+BAAoB,QAAwB;YAAxB,aAAQ,GAAR,QAAQ,CAAgB;YAPnC,gBAAW,GAAG,IAAI,CAAC;YACnB,gBAAW,GAAG,IAAI,CAAC;YACnB,iBAAY,GAAG,IAAI,CAAC;YACnB,iBAAY,GAAG,IAAIA,iBAAY,EAAiB,CAAC;YAE3D,QAAG,GAAW,KAAK,CAAC;SAInB;QAED,+CAAe,GAAf;SACC;QAED,2CAAW,GAAX,UAAY,OAAsB;YAChC,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBACnC,OAAO;aACR;YACD,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,aAAa,EAAE,CAAC;SACtB;QAED,6CAAa,GAAb;YAAA,iBAMC;YALC,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;gBACtC,OAAO;aACR;YAED,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,KAAI,CAAC,eAAe,GAAA,CAAC,CAAC;SACnE;QAED,0CAAU,GAAV,UAAW,UAAmB;YAC5B,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC;YAClC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,CAAC,IAAI,OAAA,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,UAAU,GAAA,CAAC,CAAC;SACzD;QAED,2CAAW,GAAX,UAAY,KAAkB,EAAE,UAAmB;YACjD,IAAI,CAAC,eAAe,GAAG,SAAS,CAAC;YACjC,KAAK,CAAC,OAAO,CAAC,MAAM,GAAG,UAAU,CAAC;SACnC;QAED,yCAAS,GAAT,UAAU,GAAW;YACnB,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACtG,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,sCAAM,GAAN,UAAO,GAAW;YAChB,IAAI,GAAG,KAAK,CAAC,EAAE;gBACb,OAAO;aACR;YAED,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YAC5G,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,wCAAQ,GAAR,UAAS,GAAW;YAClB,IAAI,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE;gBACpC,OAAO;aACR;YAED,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YACzB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;YACxG,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,4CAAY,GAAZ,UAAa,GAAW;YACtB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtG,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,2CAAW,GAAX,UAAY,GAAW;YACrB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YACjC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAED,oDAAoB,GAApB,UAAqB,CAAc;YACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;YAClC,IAAI,CAAC,QAAQ,EAAE,CAAC;SACjB;QAEO,wCAAQ,GAAhB;YACE,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACrC;QAED,6CAAa,GAAb;YAAA,iBAIC;YAHC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,EAAE;gBACpB,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,EAAE,CAAC,CAAC;aACpC,CAAC,CAAA;SACH;kGA9FU,qBAAqB;kEAArB,qBAAqB;gBA5ErB,8BACX;gBAAA,sEAOM;gBAEN,sEAsDM;gBACR,iBAAM;;gBAhEE,eAAiB;gBAAjB,sCAAiB;gBASjB,eAAY;gBAAZ,iCAAY;;oCAnBpB;KAOA,IA6KC;IA/FY,sDAAqB;sDAArB,qBAAqB;kBA9EjCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,eAAe;oBACzB,QAAQ,EAAE,4mHAoEX,EAAC,MAAM,EAAE,CAAC,yHAOT,CAAC;iBAAC;sEAEO,MAAM;sBAAdA,UAAK;gBACG,GAAG;sBAAXA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBACG,WAAW;sBAAnBA,UAAK;gBACG,YAAY;sBAApBA,UAAK;gBACI,YAAY;sBAArBA,WAAM;;;;;;;;;;;;;;;;;;;QC/EH,4BACE;QADgC,sOAAiC,SAAS,KAAE;QAC5E,2BACE;QAAA,4BAAM;QAAA,YAAc;QAAA,iBAAO;QAC3B,+BACE;QAAA,4BAG8D;QAF3D,sOAAiC,SAAS,KAAE;QAEe,iBAAI;QAClE,qBACA;QAAA,6BAG2C;QAFxC,sOAAiC,KAAK,KAAE;QAEA,iBAAI;QACjD,iBAAO;QACT,iBAAM;QACR,iBAAI;;;QAbM,eAAc;QAAd,mCAAc;;;QAL5B,6BACE;QAAA,4BAA+C;QAAA,uBAAyC;QAAA,iBAAI;QAC5F,8BACE;QAAA,sEAeI;QACN,iBAAM;QACR,iBAAK;;;QAnB0D,eAAsB;QAAtB,uCAAsB;QAEgB,eAAe;QAAf,yCAAe;;IANtH;QAwDE;YAFU,kBAAa,GAAgC,IAAIA,iBAAY,EAAkB,CAAC;SAIzF;QAED,8CAAe,GAAf;SAEC;QAED,yCAAU,GAAV,UAAW,KAAS,EAAC,KAAW,EAAC,MAAkB;YACjD,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACjB,IAAI,SAAS,GAAG;gBACd,KAAK,EAAC,KAAK;gBACX,MAAM,EAAC,MAAM;aACd,CAAC;YAEF,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACpC;QAED,mCAAI,GAAJ,UAAK,KAAS;YACZ,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;SACzB;gGA3BU,oBAAoB;iEAApB,oBAAoB;gBAhDpB,6BACX;gBAAA,mEAoBK;gBACP,iBAAK;;gBArBgD,eAAkB;gBAAlB,yEAAkB;;mCATvE;KAMA,IA8EC;IA5BY,oDAAoB;sDAApB,oBAAoB;kBAlDhCA,cAAS;mBAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,QAAQ,EAAE,mpCA6BR,EAAC,MAAM,EAAE,CAAC,qVAkBb,CAAC;iBAAC;0CAEQ,OAAO;sBAAfA,UAAK;gBACG,aAAa;sBAArBA,UAAK;gBAEI,aAAa;sBAAtBA,WAAM;;;;;;;;;;;;;;;;;ICjDT;QAEE,0BAAoB,IAAkB;YAAlB,SAAI,GAAJ,IAAI,CAAc;SAErC;QAED,kCAAO,GAAP,UAAQ,OAAc,EAAC,IAAS;YAAhC,iBA2BC;YA1BC,IAAI,OAAO,GAAG,IAAI,OAAO,CAAoB,UAAC,OAAO,EAAC,MAAM;gBAC1D,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;oBACpB,IAAM,gBAAgB,GAAG;wBACvB,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE;wBAC7B,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY;qBACxC,CAAC;oBACF,IAAI,OAAO,GAAG,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;oBACzC,OAAO,CAAC,OAAO,CAAC;wBACd,OAAO,EAAC,OAAO;wBACf,qBAAqB,EAAE;4BACrB,OAAO,EAAE,IAAI;yBACd;wBACD,MAAM,EAAC,IAAI;qBACZ,EAAC,UAAC,OAAyB,EAAC,MAAU;wBACrC,IAAG,gBAAgB,CAAC,OAAO,CAAC,MAAM,CAAC,GAAC,CAAC,EAAC;4BACpC,MAAM,EAAE,CAAC;yBACV;6BAAM;4BACL,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,UAAS,CAAK;gCACnC,OAAO,CAAC,CAAC,iBAAiB,KAAG,WAAW,CAAC;6BAC1C,CAAC,CAAC,CAAC;yBACL;qBACF,CAAC,CAAC;iBACJ,CAAC,CAAC;aACJ,CAAC,CAAC;YAEH,OAAOK,SAAI,CAAC,OAAO,CAAC,CAAC;SACtB;wFAhCU,gBAAgB;gEAAhB,gBAAgB,WAAhB,gBAAgB;+BAZ7B;KAWA,IAkCC;IAjCY,4CAAgB;sDAAhB,gBAAgB;kBAD5BL,eAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IC4BX,0CAAgD;IAChD,2CAAkD;IAClD,6CAAsD;IACtD,+CAA4D;IAC5D,6CAAsD;IACtD,2CAAkD;IAClD,gDAA4D;IAC5D,2CAAiE;IACjE,0CAA+D;IAC/D,yCAA6D;IAC7D,wCAA2D;IAC3D,8CAAyE;IACzE,8CAAuE;IAEvE,2CAAkD;IAClD,iDAA8D;IAC9D,8CAAwD;IACxD,uDAA4E;IAC5E,kDAAkE;IAClE,gDAA8D;IAC9D,4CAAoD;IACpD,yCAA4C;IAC5C,+CAA0D;IAC1D,iDAA8D;IAC9D,8CAAwD;IACxD,4CAAoD;IACpD,6CAAsD;IACtD,4CAAoD;IAEpD,yCAAoC;IAGpC,IAAM,UAAU,GAAG;;QAEjBO,0CAAoB;QACpBC,8CAAsB;QACtBC,0CAAoB;QACpBC,sCAAkB;QAClBC,gDAAuB;QACvBC,sCAAkB;QAClBC,oCAAiB;QACjBC,kCAAgB;QAChBC,gCAAe;QACfC,4CAAqB;QACrBC,4CAAqB;QACrBC,sCAAkB;QAClBC,kDAAwB;QACxBC,4CAAqB;QACrBC,8DAA8B;QAC9BC,oDAAyB;QACzBC,gDAAuB;QACvBC,wCAAmB;QACnBC,kCAAgB;QAChBC,8CAAsB;QACtBC,kDAAwB;QACxBC,4CAAqB;QACrBC,wCAAmB;QACnBC,0CAAoB;QACpBC,oCAAiB;QACjBC,sCAAkB;QAClBC,wCAAmB;KACpB,CAAC;IAEF,IAAM,QAAQ,GAAG;;QAEfC,kCAAgB;KACjB,CAAC;IAEF;QAAA;SAqBC;QANQ,8BAAO,GAAd,UAAe,oBAAwB;YACrC,OAAO;gBACL,QAAQ,EAAE,sBAAsB;gBAChC,SAAS,EAAE,QAAQ;aACpB,CAAC;SACH;kEANU,sBAAsB;mIAAtB,sBAAsB,mBAFtB,QAAQ,YAXV;oBACPC,mBAAY;oBACZC,iBAAW;oBACXjC,oBAAa;oBACbkC,qBAAgB;oBAChBC,sBAAa;oBACbC,qBAAS;oBACTrC,yBAAiB;iBAClB;qCApHH;KA2GA,IAqBC;IAPY,wDAAsB;4FAAtB,sBAAsB;;YAhDjCK,0CAAoB;YACpBC,8CAAsB;YACtBC,0CAAoB;YACpBC,sCAAkB;YAClBC,gDAAuB;YACvBC,sCAAkB;YAClBC,oCAAiB;YACjBC,kCAAgB;YAChBC,gCAAe;YACfC,4CAAqB;YACrBC,4CAAqB;YACrBC,sCAAkB;YAClBC,kDAAwB;YACxBC,4CAAqB;YACrBC,8DAA8B;YAC9BC,oDAAyB;YACzBC,gDAAuB;YACvBC,wCAAmB;YACnBC,kCAAgB;YAChBC,8CAAsB;YACtBC,kDAAwB;YACxBC,4CAAqB;YACrBC,wCAAmB;YACnBC,0CAAoB;YACpBC,oCAAiB;YACjBC,sCAAkB;YAClBC,wCAAmB,aAUjBE,mBAAY;YACZC,iBAAW;YACXjC,oBAAa;YACbkC,qBAAgB;YAChBC,sBAAa;YACbC,qBAAS;YACTrC,yBAAiB;;YA1CnBK,0CAAoB;YACpBC,8CAAsB;YACtBC,0CAAoB;YACpBC,sCAAkB;YAClBC,gDAAuB;YACvBC,sCAAkB;YAClBC,oCAAiB;YACjBC,kCAAgB;YAChBC,gCAAe;YACfC,4CAAqB;YACrBC,4CAAqB;YACrBC,sCAAkB;YAClBC,kDAAwB;YACxBC,4CAAqB;YACrBC,8DAA8B;YAC9BC,oDAAyB;YACzBC,gDAAuB;YACvBC,wCAAmB;YACnBC,kCAAgB;YAChBC,8CAAsB;YACtBC,kDAAwB;YACxBC,4CAAqB;YACrBC,wCAAmB;YACnBC,0CAAoB;YACpBC,oCAAiB;YACjBC,sCAAkB;YAClBC,wCAAmB;sDAsBR,sBAAsB;kBAdlCjC,aAAQ;mBAAC;oBACR,OAAO,EAAE;wBACPmC,mBAAY;wBACZC,iBAAW;wBACXjC,oBAAa;wBACbkC,qBAAgB;wBAChBC,sBAAa;wBACbC,qBAAS;wBACTrC,yBAAiB;qBAClB;oBACD,YAAY,EAAE,UAAU;oBACxB,OAAO,EAAE,UAAU;oBACnB,SAAS,EAAE,QAAQ;iBACpB;;;;;;;;;;;;;;;;;;;;;;;;ICpHD,4BAAwB;;;;;;;;;;;;"}